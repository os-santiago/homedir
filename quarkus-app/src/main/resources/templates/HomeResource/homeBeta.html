{#include layout/base version=version stats=stats links=links}
{#title}Inicio beta{/title}
{#breadcrumbs}<span>Inicio beta</span>{/breadcrumbs}
{#main}
<section class="hero">
    <div class="hero__content">
        <div class="hero__kicker">Vista beta</div>
        <h1>Explora la nueva experiencia de Homedir</h1>
        <p class="lead">Probamos un disenio renovado para navegar eventos, comunidades y proyectos con mayor claridad.</p>
        <div class="hero__actions">
            <a href="#upcoming" class="btn animate-press">Ver eventos</a>
            <a href="/private/profile" class="btn btn-ghost animate-press">Ir a mi perfil</a>
        </div>
        <div class="hero__stats">
            <div class="stat-card">
                <span class="stat-label">Version</span>
                <span class="stat-value">v{version}</span>
                <span class="stat-hint">Vista beta en pruebas</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Proximos</span>
                <span class="stat-value">{upcoming.size}</span>
                <span class="stat-hint">Eventos agendados</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Pasados</span>
                <span class="stat-value">{past.size}</span>
                <span class="stat-hint">Historial disponible</span>
            </div>
        </div>
    </div>
    <div class="hero__panel">
        {#include _now-box nowBox=nowBox /}
    </div>
</section>

<section class="home-section surface shortcuts">
    <div class="section-heading">
        <p class="section-subtitle">Accesos</p>
        <h1 class="page-title">Explora rapido</h1>
    </div>
    <div class="shortcut-grid">
        <a class="shortcut-card" href="/comunidad">
            <div class="shortcut-label">Comunidad</div>
            <div class="shortcut-title">Personas y grupos</div>
        </a>
        <a class="shortcut-card" href="/eventos">
            <div class="shortcut-label">Eventos</div>
            <div class="shortcut-title">Proximas actividades</div>
        </a>
        <a class="shortcut-card" href="/proyectos">
            <div class="shortcut-label">Proyectos</div>
            <div class="shortcut-title">Trabajo abierto</div>
        </a>
        <a class="shortcut-card" href="/private/profile">
            <div class="shortcut-label">Perfil</div>
            <div class="shortcut-title">Tu informacion</div>
        </a>
    </div>
</section>

<section class="home-section surface" id="upcoming">
    <div class="section-heading">
        <p class="section-subtitle">Programacion</p>
        <h1 class="page-title">Eventos disponibles</h1>
    </div>
    {#if upcoming.isEmpty()}
        <p class="section-subtitle no-events">No hay eventos proximos por ahora. Vuelve pronto.</p>
    {#else}
        <div class="timeline">
            <div class="timeline-label">Hoy: {today.format('dd/MM/yyyy')}</div>
            {#for e in upcoming}
            <div class="timeline-item">
                <div class="timeline-marker"></div>
                <article class="event-row">
                    <div class="event-logo">
                        {#if app:validUrl(e.logoUrl)}
                        <img src="{e.logoUrl}" alt="Logo de {e.title}">
                        {#else}
                        <div class="no-logo">Sin logo disponible</div>
                        {/if}
                    </div>
                    <div class="event-main">
                        <h2 class="event-name"><a href="/event/{e.id}" title="Ver detalles del evento">{e.title}</a></h2>
                        <div class="event-tags">
                            <span class="badge event-type {e.typeCss}">{e.typeLabel}</span>
                            {#if e.isOngoing()}
                            <span class="badge info">En curso</span>
                            {/if}
                        </div>
                        {#if e.descriptionSummary}
                        <p class="event-description">{e.descriptionSummary}</p>
                        {/if}
                        {#if app:validUrl(e.website) || app:validUrl(e.twitter) || app:validUrl(e.linkedin) || app:validUrl(e.instagram) || app:validEmail(e.contactEmail) || app:validUrl(e.ticketsUrl)}
                        <div class="event-links">
                            {#if app:validUrl(e.website)}<a href="{e.website}" target="_blank" rel="noopener" class="btn"> Sitio Web</a>{/if}
                            {#if app:validUrl(e.twitter)}<a href="{e.twitter}" target="_blank" rel="noopener" class="btn"> Twitter</a>{/if}
                            {#if app:validUrl(e.linkedin)}<a href="{e.linkedin}" target="_blank" rel="noopener" class="btn"> LinkedIn</a>{/if}
                            {#if app:validUrl(e.instagram)}<a href="{e.instagram}" target="_blank" rel="noopener" class="btn"> Instagram</a>{/if}
                            {#if app:validEmail(e.contactEmail)}<a href="mailto:{e.contactEmail}" target="_blank" rel="noopener" class="btn"> Email</a>{/if}
                            {#if app:validUrl(e.ticketsUrl)}<a href="{e.ticketsUrl}" target="_blank" rel="noopener" class="btn"> Entradas</a>{/if}
                        </div>
                        {/if}
                    </div>
                    <div class="event-countdown">
                        {#if e.formattedDate}
                        <p class="event-date">{e.formattedDate}</p>
                        {/if}
                        <p class="days-left">{e.countdownLabel}</p>
                    </div>
                </article>
            </div>
            {/for}
        </div>
    {/if}
</section>

<section class="home-section surface" id="past">
    <div class="section-heading">
        <p class="section-subtitle">Historial</p>
        <h1 class="page-title">Eventos pasados</h1>
    </div>
    {#if past.isEmpty()}
        <p class="section-subtitle no-events">Aun no tenemos eventos anteriores.</p>
    {#else}
        <div class="timeline past-events">
            {#for e in past}
            <div class="timeline-item past">
                <div class="timeline-marker"></div>
                <article class="event-row past">
                    <div class="event-logo">
                        {#if app:validUrl(e.logoUrl)}
                        <img src="{e.logoUrl}" alt="Logo de {e.title}">
                        {#else}
                        <div class="no-logo">Sin logo disponible</div>
                        {/if}
                    </div>
                    <div class="event-main">
                        <h2 class="event-name"><a href="/event/{e.id}" title="Ver detalles del evento">{e.title}</a></h2>
                        <div class="event-tags">
                            <span class="badge event-type {e.typeCss}">{e.typeLabel}</span>
                            <span class="badge past">Finalizado</span>
                        </div>
                        {#if e.descriptionSummary}
                        <p class="event-description">{e.descriptionSummary}</p>
                        {/if}
                    </div>
                    <div class="event-countdown">
                        {#if e.formattedDate}
                        <p class="event-date">{e.formattedDate}</p>
                        {/if}
                    </div>
                </article>
            </div>
            {/for}
        </div>
    {/if}
</section>
{/main}
{/include}
