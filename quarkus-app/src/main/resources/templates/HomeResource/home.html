{#extends layout/main}
{#param noNav=true /}
{#param noFooter=true /}

{#title}HomeDir{/title}

{#body}
<div class="floating-shapes">
  <div class="shape shape-1">
    <svg viewBox="0 0 120 120" aria-hidden="true">
      <circle cx="60" cy="60" r="52" fill="url(#grad1)" opacity="0.12" />
      <defs>
        <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#ff8bd1" />
          <stop offset="100%" stop-color="#7bd7ff" />
        </linearGradient>
      </defs>
    </svg>
  </div>
  <div class="shape shape-2">
    <svg viewBox="0 0 160 160" aria-hidden="true">
      <rect x="18" y="18" width="124" height="124" rx="28" ry="28" fill="#7bd7ff" opacity="0.1" />
      <rect x="36" y="36" width="88" height="88" rx="22" ry="22" fill="#ff8bd1" opacity="0.16" />
    </svg>
  </div>
  <div class="shape shape-3">
    <svg viewBox="0 0 140 140" aria-hidden="true">
      <polygon points="70,8 130,52 106,132 34,132 10,52" fill="#caffbf" opacity="0.12" />
      <circle cx="70" cy="78" r="24" fill="#7bd7ff" opacity="0.18" />
    </svg>
  </div>
  <div class="shape shape-4">
    <svg viewBox="0 0 140 140" aria-hidden="true">
      <path
        d="M20,40 C30,12 110,6 120,40 C128,70 112,118 72,126 C40,132 12,94 20,40 Z"
        fill="#ff8bd1"
        opacity="0.1" />
      <path d="M44,54 C46,32 96,30 96,56 C96,82 64,78 64,100" stroke="#7bd7ff" stroke-width="6" opacity="0.22" />
    </svg>
  </div>
</div>

<nav class="top-nav">
  <div class="inner">
    <div class="logo">
      <div class="logo-icon" aria-hidden="true">
        <svg viewBox="0 0 64 64" role="img" aria-label="HomeDir logo">
          <rect x="6" y="6" width="52" height="52" rx="12" fill="#0d071b" stroke="#ff8bd1" stroke-width="3" />
          <path d="M20 44 L20 22 L32 14 L44 22 L44 44" fill="none" stroke="#7bd7ff" stroke-width="3" />
          <rect x="28" y="32" width="8" height="12" fill="#ff8bd1" />
        </svg>
      </div>
      <div class="logo-text">
        <span id="navPlatformName">HomeDir</span>
        <span class="logo-subtitle" id="navTagline">by OpenSourceSantiago</span>
      </div>
    </div>
    <div class="links">
      <a href="#communityCard">Community</a>
      <a href="#eventsSection">Events</a>
      <a href="#projectsSection">Projects</a>
    </div>
    <div class="nav-actions">
      <!-- TODO: integrar estado real de login Qute con esta nav -->
      <button class="login-btn-nav" id="openLoginBtn">Login</button>
      <div class="user-menu" id="userMenuNav">
        <div class="user-avatar" aria-hidden="true">HD</div>
        <div class="user-dropdown">
          <div class="user-name">Logged in</div>
          <div class="user-actions">
            <a href="/profile" class="btn">Profile</a>
            <a href="/logout" class="btn">Logout</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>

<div class="app-container">
  <div class="public-content">
    <header class="public-header">
      <div class="content">
        <h1 id="mainTitle">HomeDir</h1>
        <p class="tagline" id="mainTagline">
          by OpenSourceSantiago - The community platform to scale your teams and projects
        </p>
        <div class="meta">
          <span>Open-source community</span>
          <span>Pixel-art inspired UI</span>
          <span>Community-first workflow</span>
        </div>
        <div class="actions">
          <button class="pixel-button">Launch Campus</button>
          <a class="cta" href="/docs">Explore Docs</a>
        </div>
      </div>
      <div class="stats-grid">
        <div class="stat-card">
          <span class="label">Version</span>
          <span class="value">{version}</span>
        </div>
        <div class="stat-card">
          <span class="label">Upcoming events</span>
          <span class="value">{upcoming.size ?: 0}</span>
        </div>
        <div class="stat-card">
          <span class="label">Past events</span>
          <span class="value">{past.size ?: 0}</span>
        </div>
        <div class="stat-card">
          <span class="label">Updated</span>
          <span class="value">{stats.get('lastUpdated')}</span>
        </div>
      </div>
    </header>

    <main class="main-sections">
      <article class="section-card" id="communityCard">
        <div>
          <p class="eyebrow">Community</p>
          <h2 id="communityTitle">Community Campus</h2>
          <p id="communityDescription">
            Dive into the HomeDir community campus to connect, build and level up your events together.
          </p>
          <div class="meta">
            <span class="badge">Live beta</span>
            <span class="activity-text">{upcoming.size ?: 0} events this month</span>
          </div>
          <div class="actions">
            <button class="btn primary" id="openCommunity">Enter campus</button>
            <button class="btn" id="viewRoadmap">View roadmap</button>
          </div>
        </div>
        <div class="visual">
          <div class="badge">Pixel social hub</div>
          <p class="detail">Backed by arcades, squads, and open collaboration.</p>
        </div>
      </article>

      <article class="section-card" id="eventsSection">
        <div>
          <p class="eyebrow">Events</p>
          <h2 id="eventsTitle">Events & Experiences</h2>
          <p>
            Keep track of meetups, conferences, and workshops with our adaptive agenda for teams and communities.
          </p>
          <div class="meta">
            <span class="activity-text">{upcoming.size ?: 0} events coming up</span>
            <span class="activity-text">{past.size ?: 0} archived</span>
          </div>
          <div class="actions">
            <a href="/event" class="btn primary">View events</a>
            <a href="/ingresar" class="btn">Create new</a>
          </div>
        </div>
        <div class="visual">
          <div class="badge">Real-time schedule</div>
          <p class="detail">Follow sessions, speakers, and live talks.</p>
        </div>
      </article>

      <article class="section-card" id="projectsSection">
        <div>
          <p class="eyebrow">Projects</p>
          <h2 id="projectsTitle">Open Projects</h2>
          <p>
            Collaborate on open-source initiatives, find squads to join, and boost your builder profile with HomeDir.
          </p>
          <div class="meta">
            <span class="activity-text">Fresh collaborations weekly</span>
            <span class="activity-text">New squads forming</span>
          </div>
          <div class="actions">
            <a href="/projects" class="btn primary">Browse projects</a>
            <a href="/docs" class="btn">Contribute guide</a>
          </div>
        </div>
        <div class="visual">
          <div class="badge">Missions</div>
          <p class="detail">Stack buffs, complete missions, and unlock perks.</p>
        </div>
      </article>
    </main>
  </div>

  <div class="community-view" id="communityView" style="display: none;">
    <div class="community-header">
      <button class="back-button" id="backButton">⬅ Back to overview</button>
      <div class="view-meta">
        <span class="badge">Community campus</span>
        <span class="activity-text">Live rooms and quests</span>
      </div>
    </div>
    <div class="village-container">
      <div class="village-landscape">
        <div class="village-sky"></div>
        <div class="village-ground"></div>
        <div class="village-buildings">
          <div class="building hall">Hall</div>
          <div class="building lab">Builder Lab</div>
          <div class="building arcade">Arcade</div>
        </div>
      </div>
      <aside class="community-stats">
        <h3>Community stats</h3>
        <ul class="list">
          <li class="item">Connected squads</li>
          <li class="item">Live workshops</li>
          <li class="item">Mentor hours</li>
          <li class="item">Daily quests</li>
        </ul>
      </aside>
    </div>
  </div>
</div>

<footer class="character-sheet">
  <div class="novice-warning">New to HomeDir? Start your character sheet and unlock perks.</div>
  <div class="avatar">
    <img src="/images/default-avatar.png" alt="Player avatar" />
    <div>
      <p class="label">Player</p>
      <p class="value">Community Builder</p>
    </div>
  </div>
  <div class="stats">
    <div class="stat">
      <p class="label">XP</p>
      <p class="value">1200</p>
    </div>
    <div class="stat">
      <p class="label">Allies</p>
      <p class="value">24</p>
    </div>
    <div class="stat">
      <p class="label">Quests</p>
      <p class="value">8 active</p>
    </div>
    <div class="stat">
      <p class="label">Artifacts</p>
      <p class="value">5</p>
    </div>
  </div>
  <div class="actions">
    <button class="pixel-button">Edit sheet</button>
    <button class="pixel-button">Save loadout</button>
  </div>
</footer>

<div class="login-modal" id="loginModal" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
  <div class="modal-content">
    <button class="close-modal" id="closeLoginBtn" aria-label="Close login modal">×</button>
    <h2 id="loginTitle">Login to HomeDir</h2>
    <p class="modal-subtitle">Jump back into your community quests.</p>
    <div class="input-group">
      <label for="emailInput">Email</label>
      <input type="email" id="emailInput" placeholder="you@example.com" />
    </div>
    <div class="input-group">
      <label for="passwordInput">Password</label>
      <input type="password" id="passwordInput" placeholder="••••••••" />
    </div>
    <div class="modal-actions">
      <button class="pixel-button" id="loginSubmit">Login</button>
      <button class="btn" id="forgotPassword">Forgot password?</button>
    </div>
  </div>
</div>

<div class="toast" id="toast" role="status" aria-live="polite"></div>
{/body}
{/extends}
