{#include layout/base version=version stats=stats links=links}
{#title}Inicio{/title}
{#breadcrumbs}<span>Inicio</span>{/breadcrumbs}
{#main}
<section class="hero">
    <div class="hero__content">
        <div class="hero__kicker">Plataforma abierta ¬∑ Homedir</div>
        <h1>Agenda, notificaciones y eventos en un solo lugar</h1>
        <p class="lead">Sigue actividades, comparte horarios y mantente al d√≠a con la comunidad sin perder contexto entre versiones.</p>
        <div class="hero__actions">
            <a href="#upcoming" class="btn animate-press">Ver eventos</a>
            <a href="/private/profile" class="btn btn-ghost animate-press">Ir a mi perfil</a>
        </div>
        <div class="hero__stats">
            <div class="stat-card">
                <span class="stat-label">Versi√≥n</span>
                <span class="stat-value">v{version}</span>
                <span class="stat-hint">Backups aceptan mismo major.minor</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Pr√≥ximos</span>
                <span class="stat-value">{upcoming.size}</span>
                <span class="stat-hint">Eventos en agenda</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Pasados</span>
                <span class="stat-value">{past.size}</span>
                <span class="stat-hint">Referencias y archivos</span>
            </div>
        </div>
    </div>
    <div class="hero__panel">
        {#include _now-box nowBox=nowBox /}
    </div>
</section>

<section class="home-section surface" id="upcoming">
    <div class="section-heading">
        <p class="section-subtitle">Programaci√≥n</p>
        <h1 class="page-title">Eventos disponibles</h1>
    </div>
    {#if upcoming.isEmpty()}
        <p class="section-subtitle no-events">No hay eventos pr√≥ximos por ahora. Vuelve pronto üëÄ</p>
    {#else}
        <div class="timeline">
            <div class="timeline-label">Hoy: {today.format('dd/MM/yyyy')}</div>
            {#for e in upcoming}
            <div class="timeline-item">
                <div class="timeline-marker"></div>
                <article class="event-row">
                    <div class="event-logo">
                        {#if app:validUrl(e.logoUrl)}
                        <img src="{e.logoUrl}" alt="Logo de {e.title}">
                        {#else}
                        <div class="no-logo">Sin logo disponible</div>
                        {/if}
                    </div>
                    <div class="event-main">
                        <h2 class="event-name"><a href="/event/{e.id}" title="Ver detalles del evento">{e.title}</a></h2>
                        <div class="event-tags">
                            <span class="badge event-type {e.typeCss}">{e.typeLabel}</span>
                            {#if e.isOngoing()}
                            <span class="badge info">En curso</span>
                            {/if}
                        </div>
                        {#if e.descriptionSummary}
                        <p class="event-description">{e.descriptionSummary}</p>
                        {/if}
                        {#if app:validUrl(e.website) || app:validUrl(e.twitter) || app:validUrl(e.linkedin) || app:validUrl(e.instagram) || app:validEmail(e.contactEmail) || app:validUrl(e.ticketsUrl)}
                        <div class="event-links">
                            {#if app:validUrl(e.website)}<a href="{e.website}" target="_blank" rel="noopener" class="btn">üåê Sitio Web</a>{/if}
                            {#if app:validUrl(e.twitter)}<a href="{e.twitter}" target="_blank" rel="noopener" class="btn">üê¶ Twitter</a>{/if}
                            {#if app:validUrl(e.linkedin)}<a href="{e.linkedin}" target="_blank" rel="noopener" class="btn">üíº LinkedIn</a>{/if}
                            {#if app:validUrl(e.instagram)}<a href="{e.instagram}" target="_blank" rel="noopener" class="btn">üì∏ Instagram</a>{/if}
                            {#if app:validEmail(e.contactEmail)}<a href="mailto:{e.contactEmail}" target="_blank" rel="noopener" class="btn">üìß Email</a>{/if}
                            {#if app:validUrl(e.ticketsUrl)}<a href="{e.ticketsUrl}" target="_blank" rel="noopener" class="btn">üéüÔ∏è Entradas</a>{/if}
                        </div>
                        {/if}
                    </div>
                    <div class="event-countdown">
                        {#if e.formattedDate}
                        <p class="event-date">{e.formattedDate}</p>
                        {/if}
                        <p class="days-left">{e.countdownLabel}</p>
                    </div>
                </article>
            </div>
            {/for}
        </div>
    {/if}
    </section>

    <section class="home-section surface" id="past">
        <div class="section-heading">
            <p class="section-subtitle">Historial</p>
            <h1 class="page-title">Eventos pasados</h1>
        </div>
        {#if past.isEmpty()}
            <p class="section-subtitle no-events">A√∫n no tenemos eventos anteriores.</p>
        {#else}
            <div class="timeline past-events">
                {#for e in past}
                <div class="timeline-item past">
                    <div class="timeline-marker"></div>
                    <article class="event-row past">
                        <div class="event-logo">
                            {#if app:validUrl(e.logoUrl)}
                            <img src="{e.logoUrl}" alt="Logo de {e.title}">
                            {#else}
                            <div class="no-logo">Sin logo disponible</div>
                            {/if}
                        </div>
                        <div class="event-main">
                            <h2 class="event-name"><a href="/event/{e.id}" title="Ver detalles del evento">{e.title}</a></h2>
                            <div class="event-tags">
                                <span class="badge event-type {e.typeCss}">{e.typeLabel}</span>
                                <span class="badge past">Finalizado</span>
                            </div>
                            {#if e.descriptionSummary}
                            <p class="event-description">{e.descriptionSummary}</p>
                            {/if}
                        </div>
                        <div class="event-countdown">
                            {#if e.formattedDate}
                            <p class="event-date">{e.formattedDate}</p>
                            {/if}
                        </div>
                    </article>
                </div>
                {/for}
            </div>
        {/if}
    </section>
{/main}
{/include}
