{#include layout/main}
{#title}Tablero de Misiones{/title}
{#body}
<div class="quest-board-container nes-container is-dark with-title">
    <h2 class="title" style="background-color: #212529;">Tablero de Misiones</h2>

    <p class="nes-text is-primary">¡Bienvenido, Aventurero! Completa misiones para ganar XP y subir de nivel.</p>

    <div style="margin-bottom: 2rem; display: flex; gap: 1rem; align-items: center;">
        <span class="nes-text">Misiones Disponibles: {quests.size}</span>
        <div style="margin-left: auto;">
            <a href="/quests" class="nes-btn {#if filter.or('all') == 'all'}is-primary{#else}is-normal{/if}">Todas</a>
            <a href="/quests?filter=mine" class="nes-btn {#if filter == 'mine'}is-primary{#else}is-normal{/if}">Mis
                Misiones</a>
        </div>
    </div>

    <div class="quests-list">
        {#if quests.isEmpty}
        <div class="nes-container is-rounded is-centered">
            <p>No hay misiones disponibles por el momento.</p>
        </div>
        {#else}
        {#for quest in quests}
        <div class="nes-container is-rounded with-title quest-card" style="margin-bottom: 1rem;">
            <p class="title">{quest.difficulty} Rank</p>
            <div class="quest-content" style="display: flex; justify-content: space-between; align-items: center;">
                <div class="quest-info">
                    <h3 class="nes-text is-primary">{quest.title}</h3>
                    <p>{quest.description}</p>
                    <span class="nes-badge">
                        <span class="is-warning">{quest.xpReward} XP</span>
                    </span>
                </div>
                <div class="quest-action" style="display: flex; gap: 0.5rem;">
                    <a href="{quest.url}" target="_blank" class="nes-btn is-primary">Ver Misión</a>
                    <form action="/quests/{quest.id}/complete" method="POST">
                        <button type="submit" class="nes-btn is-success">Reclamar XP</button>
                    </form>
                </div>
            </div>
        </div>
        {/for}
        {/if}
    </div>
</div>
{/body}
{/include}