{#include layout/base}
{#title}Eventos{/title}
{#breadcrumbs}<span>Inicio</span> / <strong>Eventos</strong>{/breadcrumbs}
{#main}
<section class="hero hero--compact">
  <div class="hero__content">
    <div class="hero__kicker">Agenda · Homedir</div>
    <h1>Eventos y charlas</h1>
    <p class="lead">Consulta la programación completa, los pasados destacados y los enlaces directos de cada edición.</p>
    <div class="hero__stats">
      <div class="stat-card">
        <span class="stat-label">Próximos</span>
        <span class="stat-value">{stats.get('upcoming')}</span>
        <span class="stat-hint">En agenda</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">Pasados</span>
        <span class="stat-value">{stats.get('past')}</span>
        <span class="stat-hint">Referencias</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">Hoy</span>
        <span class="stat-value">{today.format('dd/MM/yyyy')}</span>
        <span class="stat-hint">Zona horaria local</span>
      </div>
    </div>
  </div>
</section>

<section class="surface">
  <div class="section-heading">
    <p class="section-subtitle">Próximos eventos</p>
    <h2 class="page-title">En curso o por iniciar</h2>
  </div>
  {#if upcoming.isEmpty()}
    <p class="section-subtitle no-events">No hay eventos próximos por ahora.</p>
  {#else}
  <div class="cards-grid event-grid">
    {#for e in upcoming}
      <article class="card event-card">
        <div class="event-card__head">
          <div>
            <p class="eyebrow">{e.typeLabel}</p>
            <h3><a href="/event/{e.id}" title="Ver detalles del evento">{e.title}</a></h3>
            {#if e.formattedDate}<p class="muted">{e.formattedDate}</p>{/if}
          </div>
          {#if app:validUrl(e.logoUrl)}
            <img src="{e.logoUrl}" alt="Logo de {e.title}" class="event-card__logo">
          {/if}
        </div>
        {#if e.descriptionSummary}<p class="muted">{e.descriptionSummary}</p>{/if}
        <div class="event-card__tags">
          <span class="badge event-type {e.typeCss}">{e.typeLabel}</span>
          {#if e.isOngoing()}<span class="badge info">En curso</span>{/if}
        </div>
        <div class="event-card__links">
          <a class="btn btn-ghost" href="/event/{e.id}">Ver agenda</a>
          {#if app:validUrl(e.ticketsUrl)}<a class="btn btn-ghost" href="{e.ticketsUrl}" target="_blank" rel="noopener">Tickets</a>{/if}
        </div>
      </article>
    {/for}
  </div>
  {/if}
</section>

<section class="surface">
  <div class="section-heading">
    <p class="section-subtitle">Historial</p>
    <h2 class="page-title">Eventos pasados</h2>
  </div>
  {#if past.isEmpty()}
    <p class="section-subtitle no-events">Aún no hay registros pasados.</p>
  {#else}
  <div class="timeline past-events">
    {#for e in past}
    <div class="timeline-item past">
      <div class="timeline-marker"></div>
      <article class="event-row past">
        <div class="event-logo">
          {#if app:validUrl(e.logoUrl)}
          <img src="{e.logoUrl}" alt="Logo de {e.title}">
          {#else}
          <div class="no-logo">Sin logo</div>
          {/if}
        </div>
        <div class="event-main">
          <h3 class="event-name"><a href="/event/{e.id}" title="Ver detalles del evento">{e.title}</a></h3>
          <div class="event-tags">
            <span class="badge event-type {e.typeCss}">{e.typeLabel}</span>
            <span class="badge past">Finalizado</span>
          </div>
          {#if e.descriptionSummary}<p class="event-description">{e.descriptionSummary}</p>{/if}
        </div>
        <div class="event-countdown">
          {#if e.formattedDate}<p class="event-date">{e.formattedDate}</p>{/if}
          <p class="days-left">Cerrado</p>
        </div>
      </article>
    </div>
    {/for}
  </div>
  {/if}
</section>
{/main}
{/include}
