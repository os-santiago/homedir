{#include layout/base}
{#title}
{#if event}
{event.title}
{#else}
Evento
{/if}
{/title}
{#breadcrumbs}
  {#if event}
  <a href="/">Inicio</a><span class="sep">/</span><span>{event.title}</span>
  {/if}
{/breadcrumbs}
{#main}
{#if event}
<section class="event-detail">
  <div class="card event-summary">
    <div class="event-header">
      {#if app:validUrl(event.logoUrl)}
      <img src="{event.logoUrl}" alt="Logo de {event.title}" class="event-logo">
      {/if}
      <div class="event-info">
        <h1 class="page-title">{event.title}</h1>
        {#if event.formattedDate}
        <p class="event-datetime">{event.formattedDate} | {event.startTimeStr} – {event.endTimeStr} hrs{#if event.timezone} ({event.timezone}){/if}.</p>
        {/if}
        {#if event.description}
        <p class="event-description">{event.description}</p>
        {/if}
        {#if app:validUrl(event.website) || app:validUrl(event.twitter) || app:validUrl(event.linkedin)
           || app:validUrl(event.instagram) || app:validEmail(event.contactEmail) || app:validUrl(event.ticketsUrl)}
        <div class="event-links">
          {#if app:validUrl(event.website)}<a href="{event.website}" target="_blank" rel="noopener" class="btn">🌐 Sitio Web</a>{/if}
          {#if app:validUrl(event.twitter)}<a href="{event.twitter}" target="_blank" rel="noopener" class="btn">🐦 Twitter</a>{/if}
          {#if app:validUrl(event.linkedin)}<a href="{event.linkedin}" target="_blank" rel="noopener" class="btn">💼 LinkedIn</a>{/if}
          {#if app:validUrl(event.instagram)}<a href="{event.instagram}" target="_blank" rel="noopener" class="btn">📸 Instagram</a>{/if}
          {#if app:validEmail(event.contactEmail)}<a href="mailto:{event.contactEmail}" target="_blank" rel="noopener" class="btn">📧 Email</a>{/if}
          {#if app:validUrl(event.ticketsUrl)}<a href="{event.ticketsUrl}" target="_blank" rel="noopener" class="btn">🎟️ Entradas</a>{/if}
        </div>
        {/if}
      </div>
    </div>
    {#if app:validUrl(event.mapUrl)}
      <p><strong>Lugar:</strong> <a href="{event.mapUrl}" target="_blank" rel="noopener">Ver mapa</a></p>
    {/if}
    <p><strong>Duración:</strong> {event.days} día{#if event.days > 1}s{/if}</p>
    {#if !event.agenda.isEmpty()}
    <p><a href="#agenda" class="btn btn-secondary">Ver agenda completa</a></p>
    {/if}
  </div>
    {#if !event.scenarios.isEmpty()}
    <div class="card">
      <h2 class="card-title"><span class="icon">🏟️</span>Escenarios</h2>
      <div class="scenario-grid">
      {#for s in event.scenarios}
        <article class="scenario-card">
          <h3>{s.name}</h3>
          {#if s.location}<p class="scenario-location">{s.location}</p>{/if}
          <a href="/scenario/{s.id}" class="btn">Ver charlas</a>
        </article>
      {/for}
      </div>
    </div>
    {/if}
    {#if !event.agenda.isEmpty()}
    <div class="card" id="agenda">
      <h2 class="card-title"><span class="icon">🗓️</span>Agenda</h2>
      {#for d in event.dayList}
        <details class="agenda-day" open>
          <summary>Día {d}</summary>
          <ul class="agenda-list">
          {#for t in event.getAgendaForDay(d)}
            <li class="agenda-item">
              <span class="icon">{#if t.break}☕{#else}🗣️{/if}</span>{t.startTimeStr} - {t.endTimeStr} |
              {#if t.break}{t.name}{#else}<a href="/talk/{t.id}">{t.name}</a>{/if}
              {#if !t.break && !t.speakers.isEmpty()}
              <span class="speaker-avatars">
                {#for s in t.speakers}
                  <a href="/speaker/{s.id}" title="{s.name}">
                    {#if app:validUrl(s.photoUrl)}
                      <img src="{s.photoUrl}" alt="{s.name}" class="avatar">
                    {#else}
                      <span class="avatar placeholder">👤</span>
                    {/if}
                  </a>
                {/for}
              </span>
              {/if}
              | <a href="/scenario/{t.location}">{event.getScenarioName(t.location)}</a>
            </li>
          {/for}
          </ul>
        </details>
      {/for}
    </div>
    {/if}
  <a href="/" class="btn">Volver al inicio</a>
</section>
{#else}
<p class="no-events">Evento no encontrado.</p>
{/if}
{/main}
{/include}

