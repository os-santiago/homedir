{#include layout/main activePage="home" mainClass="homedir-main-home"}
{#title}{i18n.nav_home}{/title}
{#body}
<header class="public-header home-highlight-hero">
  <p class="eyebrow">{i18n.home_welcome_title}</p>
  <h1 class="home-welcome-en">{i18n.home_welcome_en}</h1>
  <p class="home-welcome-es">{i18n.home_welcome_es}</p>
  <p class="home-highlights-intro">{i18n.home_highlights_intro}</p>
  <section class="home-new-hot" aria-label="{i18n.home_new_hot_title}">
    <div class="home-new-hot-header">
      <span class="home-chip home-new-hot-badge">{i18n.home_new_hot_badge}</span>
      <h2 class="home-new-hot-title">{i18n.home_new_hot_title}</h2>
    </div>
    <div class="home-new-hot-grid">
      <a href="/comunidad?view=featured" class="home-new-hot-card">
        <img src="/img/home-new-hot-curated.svg" alt="{i18n.home_new_hot_card_curated_alt}" loading="lazy" width="320" height="180">
        <div class="home-new-hot-copy">
          <h3>{i18n.home_new_hot_card_curated_title}</h3>
          <p>{i18n.home_new_hot_card_curated_desc}</p>
        </div>
      </a>
      <a href="/eventos" class="home-new-hot-card">
        <img src="/img/home-new-hot-events.svg" alt="{i18n.home_new_hot_card_events_alt}" loading="lazy" width="320" height="180">
        <div class="home-new-hot-copy">
          <h3>{i18n.home_new_hot_card_events_title}</h3>
          <p>{i18n.home_new_hot_card_events_desc}</p>
        </div>
      </a>
      <a href="/eventos" class="home-new-hot-card">
        <img src="/img/home-new-hot-cfp.svg" alt="{i18n.home_new_hot_card_cfp_alt}" loading="lazy" width="320" height="180">
        <div class="home-new-hot-copy">
          <h3>{i18n.home_new_hot_card_cfp_title}</h3>
          <p>{i18n.home_new_hot_card_cfp_desc}</p>
        </div>
      </a>
      <a href="/private/profile/catalog" class="home-new-hot-card">
        <img src="/img/home-new-hot-level.svg" alt="{i18n.home_new_hot_card_level_alt}" loading="lazy" width="320" height="180">
        <div class="home-new-hot-copy">
          <h3>{i18n.home_new_hot_card_level_title}</h3>
          <p>{i18n.home_new_hot_card_level_desc}</p>
        </div>
      </a>
    </div>
  </section>
  <section class="home-lightning-strip" aria-label="{i18n.home_lightning_title}">
    <div class="home-lightning-header">
      <span class="home-chip">{i18n.home_lightning_badge}</span>
      <h2>{i18n.home_lightning_title}</h2>
      <p>{i18n.home_lightning_intro}</p>
    </div>
    <div id="home-lightning-root"
      data-authenticated="{userAuthenticated}"
      data-initial-mode="lightning_thread"
      data-i18n-login-required="{i18n.home_lightning_login_required}"
      data-i18n-post-limit="{i18n.home_lightning_post_limit}"
      data-i18n-post-submit="{i18n.home_lightning_btn_submit}"
      data-i18n-post-submitting="{i18n.home_lightning_btn_submitting}"
      data-i18n-comment="{i18n.home_lightning_btn_comment}"
      data-i18n-like="{i18n.home_lightning_btn_like}"
      data-i18n-report="{i18n.home_lightning_btn_report}"
      data-i18n-load-more="{i18n.home_lightning_btn_load_more}"
      data-i18n-empty="{i18n.home_lightning_empty}"
      data-i18n-queued="{i18n.home_lightning_feedback_queued}"
      data-i18n-published="{i18n.home_lightning_feedback_published}"
      data-i18n-server-limit="{i18n.home_lightning_server_limit}"
      data-i18n-report-success="{i18n.home_lightning_report_success}"
      data-i18n-report-duplicate="{i18n.home_lightning_report_duplicate}"
      data-i18n-best-answer="{i18n.home_lightning_best_answer}"
      data-i18n-ping-best="{i18n.home_lightning_ping_best}"
      data-i18n-mode-thread="{i18n.home_lightning_mode_thread}"
      data-i18n-mode-debate="{i18n.home_lightning_mode_debate}"
      data-i18n-mode-ask="{i18n.home_lightning_mode_ask}"
      data-i18n-prompt-comment="{i18n.home_lightning_prompt_comment}"
      data-i18n-prompt-reason="{i18n.home_lightning_prompt_reason}">
      <div class="home-lightning-mode-row" role="tablist" aria-label="{i18n.home_lightning_mode_aria}">
        <button type="button" class="home-lightning-mode-btn active" data-mode="lightning_thread">{i18n.home_lightning_mode_thread}</button>
        <button type="button" class="home-lightning-mode-btn" data-mode="short_debate">{i18n.home_lightning_mode_debate}</button>
        <button type="button" class="home-lightning-mode-btn" data-mode="ask_short_sharp">{i18n.home_lightning_mode_ask}</button>
      </div>
      <form id="home-lightning-form" class="home-lightning-form {#if !userAuthenticated}hidden{/if}">
        <input id="home-lightning-title" type="text" maxlength="120" placeholder="{i18n.home_lightning_title_placeholder}" required>
        <textarea id="home-lightning-body" rows="2" maxlength="320" placeholder="{i18n.home_lightning_body_placeholder}" required></textarea>
        <div class="home-lightning-form-actions">
          <small>{i18n.home_lightning_post_limit}</small>
          <button id="home-lightning-submit" type="submit" class="btn-primary">{i18n.home_lightning_btn_submit}</button>
        </div>
      </form>
      <div id="home-lightning-login" class="home-lightning-login {#if userAuthenticated}hidden{/if}">
        <p>{i18n.home_lightning_login_required}</p>
        <a href="/private/profile" class="btn-primary">{i18n.home_lightning_login_cta}</a>
      </div>
      <div id="home-lightning-feedback" class="home-lightning-feedback hidden" role="status"></div>
      <div id="home-lightning-list" class="home-lightning-list"></div>
      <div id="home-lightning-empty" class="home-lightning-empty hidden">{i18n.home_lightning_empty}</div>
      <div class="home-lightning-actions">
        <button id="home-lightning-load-more" type="button" class="btn-primary hidden">{i18n.home_lightning_btn_load_more}</button>
      </div>
    </div>
  </section>
  <div class="home-top-metrics">
    <a href="#home-social" class="home-top-metric">
      <span class="home-top-metric-head">
        <span class="material-symbols-outlined home-top-metric-icon" aria-hidden="true">article</span>
        <span class="home-chip">{i18n.home_pill_social}</span>
      </span>
      <strong>{socialHighlightsCount}</strong>
      <small>{i18n.home_metric_updates}</small>
    </a>
    <a href="#home-events" class="home-top-metric">
      <span class="home-top-metric-head">
        <span class="material-symbols-outlined home-top-metric-icon" aria-hidden="true">event</span>
        <span class="home-chip">{i18n.home_pill_events}</span>
      </span>
      <strong>{upcomingCount}</strong>
      <small>{i18n.home_metric_upcoming}</small>
    </a>
    <a href="#home-project" class="home-top-metric">
      <span class="home-top-metric-head">
        <span class="material-symbols-outlined home-top-metric-icon" aria-hidden="true">groups</span>
        <span class="home-chip">{i18n.home_pill_project}</span>
      </span>
      <strong>{projectContributorCount}</strong>
      <small>{i18n.home_metric_contributors}</small>
    </a>
  </div>
</header>

<section class="page-grid home-panorama-grid">
  <article class="section-card home-pane" id="home-social">
    <div class="home-pane-header">
      <div class="home-pane-header-main">
        <span class="home-pane-identity home-pane-identity-social" aria-hidden="true">
          <span class="material-symbols-outlined">article</span>
        </span>
        <div>
        <h2 class="page-title">{i18n.home_social_highlights_title}</h2>
        </div>
      </div>
      <a href="/comunidad" class="btn-primary">{i18n.home_btn_open_social}</a>
    </div>
    {#if socialHighlights.isEmpty()}
    <article class="home-highlight-empty">
      <span class="material-symbols-outlined">rss_feed</span>
      <p>{i18n.home_social_empty}</p>
    </article>
    {#else}
    <div class="home-pane-list">
      {#for item in socialHighlights}
      <a href="{item.url}" target="_blank" rel="noopener noreferrer" class="home-pane-item">
        <div class="home-card-top">
          <span class="home-chip">{i18n.home_pill_social}</span>
          <span class="home-source">{item.source}</span>
        </div>
        <h3 class="home-pane-title">{item.title}</h3>
        <p class="home-pane-summary">{item.summary}</p>
      </a>
      {/for}
    </div>
    {/if}
  </article>

  <article class="section-card home-pane" id="home-events">
    <div class="home-pane-header">
      <div class="home-pane-header-main">
        <span class="home-pane-identity home-pane-identity-events">
          {#if !popularEvents.isEmpty() && app:validUrl(popularEvents[0].logoUrl)}
          <img src="{popularEvents[0].logoUrl}" alt="{popularEvents[0].title}" loading="lazy"
            class="home-pane-identity-avatar">
          {#else}
          <span class="material-symbols-outlined" aria-hidden="true">event</span>
          {/if}
        </span>
        <div>
        <h2 class="page-title">{i18n.home_events_highlights_title}</h2>
        </div>
      </div>
      <a href="/eventos" class="btn-primary">{i18n.home_btn_open_events}</a>
    </div>
    {#if popularEvents.isEmpty()}
    <article class="home-highlight-empty">
      <span class="material-symbols-outlined">event_busy</span>
      <p>{i18n.home_events_empty}</p>
    </article>
    {#else}
    <div class="home-pane-list">
      {#for event in popularEvents}
      <a href="/event/{event.id}" class="home-pane-item home-event-item">
        <div class="home-card-top">
          <span class="home-chip">{i18n.home_pill_events}</span>
          <span class="home-source">{event.formattedDate ?: i18n.home_event_date_tba}</span>
        </div>
        <div class="home-event-content">
          <span class="home-event-avatar-shell">
            {#if app:validUrl(event.logoUrl)}
            <img src="{event.logoUrl}" alt="{event.title}" loading="lazy" class="home-event-avatar">
            {#else}
            <span class="material-symbols-outlined home-event-avatar-fallback" aria-hidden="true">event</span>
            {/if}
          </span>
          <div class="home-event-text">
            <h3 class="home-pane-title">{event.title}</h3>
            <p class="home-pane-summary">{event.descriptionSummary ?: i18n.home_event_desc_default}</p>
          </div>
        </div>
      </a>
      {/for}
    </div>
    {/if}
  </article>

  <article class="section-card home-pane" id="home-project">
    <div class="home-pane-header">
      <div class="home-pane-header-main">
        <span class="home-pane-identity home-pane-identity-project" aria-hidden="true">
          <span class="material-symbols-outlined">groups</span>
        </span>
        <div>
        <h2 class="page-title">{i18n.home_project_highlights_title}</h2>
        </div>
      </div>
      <a href="/proyectos" class="btn-primary">{i18n.home_btn_open_project}</a>
    </div>

    <div class="home-project-brief">
      <p><span>{i18n.home_project_release_label}</span><strong>v{app:version()}</strong></p>
      <p><span>{i18n.home_project_commit_label}</span><strong>{app:gitCommit()}</strong></p>
      <p><span>{i18n.home_metric_contributors}</span><strong>{projectContributorCount}</strong></p>
      <p><span>{i18n.home_project_total_contributions}</span><strong>{projectContributionTotal}</strong></p>
    </div>

    {#if projectHighlights.isEmpty()}
    <p class="home-pane-summary">{i18n.home_project_no_data}</p>
    {#else}
    <div class="home-contributor-grid home-contributor-grid-compact">
      {#for contributor in projectHighlights}
      <a href="{contributor.htmlUrl}" target="_blank" rel="noopener noreferrer" class="home-contributor-card"
        title="{contributor.login}">
        <span class="home-contributor-avatar-shell">
          <img src="{contributor.avatarUrl}" alt="{contributor.login}" loading="lazy" class="home-contributor-avatar">
        </span>
        <span class="home-contributor-login">{contributor.login}</span>
        <span class="home-contributor-meta">{contributor.contributions} {i18n.home_project_contribs_unit}</span>
      </a>
      {/for}
    </div>
    {/if}

    <div class="home-project-actions-row">
      <a href="/proyectos" class="btn-primary">{i18n.home_btn_explore_tracks}</a>
      <a href="https://github.com/os-santiago/homedir" target="_blank" rel="noopener noreferrer" class="btn-primary">
        {i18n.home_btn_view_repo}
      </a>
    </div>
  </article>
</section>
<script src="/js/home-lightning.js?v={app:version()}" defer></script>
{/body}
{/include}
