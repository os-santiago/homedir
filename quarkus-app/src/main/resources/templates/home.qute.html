{#include layout/main activePage="home" mainClass="homedir-main-home"}
{#title}{i18n.nav_home}{/title}
{#body}
<header class="public-header home-highlight-hero">
  <p class="eyebrow">{i18n.nav_home}</p>
  <h1 class="public-title">{i18n.home_hero_title_combined}</h1>
  <p class="tagline">
    {i18n.home_hero_desc}
  </p>
  <div class="home-top-metrics">
    <a href="#home-social" class="home-top-metric">
      <span class="home-chip">{i18n.home_pill_social}</span>
      <strong>{socialHighlightsCount}</strong>
      <small>{i18n.home_metric_updates}</small>
    </a>
    <a href="#home-events" class="home-top-metric">
      <span class="home-chip">{i18n.home_pill_events}</span>
      <strong>{upcomingCount}</strong>
      <small>{i18n.home_metric_upcoming}</small>
    </a>
    <a href="#home-project" class="home-top-metric">
      <span class="home-chip">{i18n.home_pill_project}</span>
      <strong>{projectContributorCount}</strong>
      <small>{i18n.home_metric_contributors}</small>
    </a>
  </div>
</header>

<section class="page-grid home-panorama-grid">
  <article class="section-card home-pane" id="home-social">
    <div class="home-pane-header">
      <div>
        <p class="section-subtitle">{i18n.home_social_highlights_eyebrow}</p>
        <h2 class="page-title">{i18n.home_social_highlights_title}</h2>
      </div>
      <a href="/comunidad" class="btn-primary">{i18n.home_btn_open_social}</a>
    </div>
    {#if socialHighlights.isEmpty()}
    <article class="home-highlight-empty">
      <span class="material-symbols-outlined">rss_feed</span>
      <p>{i18n.home_social_empty}</p>
    </article>
    {#else}
    <div class="home-pane-list">
      {#for item in socialHighlights}
      <a href="{item.url}" target="_blank" rel="noopener noreferrer" class="home-pane-item">
        <div class="home-card-top">
          <span class="home-chip">{i18n.home_pill_social}</span>
          <span class="home-source">{item.source}</span>
        </div>
        <h3 class="home-pane-title">{item.title}</h3>
        <p class="home-pane-summary">{item.summary}</p>
      </a>
      {/for}
    </div>
    {/if}
  </article>

  <article class="section-card home-pane" id="home-events">
    <div class="home-pane-header">
      <div>
        <p class="section-subtitle">{i18n.home_events_highlights_eyebrow}</p>
        <h2 class="page-title">{i18n.home_events_highlights_title}</h2>
      </div>
      <a href="/eventos" class="btn-primary">{i18n.home_btn_open_events}</a>
    </div>
    {#if popularEvents.isEmpty()}
    <article class="home-highlight-empty">
      <span class="material-symbols-outlined">event_busy</span>
      <p>{i18n.home_events_empty}</p>
    </article>
    {#else}
    <div class="home-pane-list">
      {#for event in popularEvents}
      <a href="/event/{event.id}" class="home-pane-item">
        <div class="home-card-top">
          <span class="home-chip">{i18n.home_pill_events}</span>
          <span class="home-source">{event.formattedDate ?: i18n.home_event_date_tba}</span>
        </div>
        <h3 class="home-pane-title">{event.title}</h3>
        <p class="home-pane-summary">{event.descriptionSummary ?: i18n.home_event_desc_default}</p>
      </a>
      {/for}
    </div>
    {/if}
  </article>

  <article class="section-card home-pane" id="home-project">
    <div class="home-pane-header">
      <div>
        <p class="section-subtitle">{i18n.home_project_highlights_eyebrow}</p>
        <h2 class="page-title">{i18n.home_project_highlights_title}</h2>
      </div>
      <a href="/proyectos" class="btn-primary">{i18n.home_btn_open_project}</a>
    </div>

    <div class="home-project-brief">
      <p><span>{i18n.home_project_release_label}</span><strong>v{app:version()}</strong></p>
      <p><span>{i18n.home_project_commit_label}</span><strong>{app:gitCommit()}</strong></p>
      <p><span>{i18n.home_metric_contributors}</span><strong>{projectContributorCount}</strong></p>
      <p><span>{i18n.home_project_total_contributions}</span><strong>{projectContributionTotal}</strong></p>
    </div>

    {#if projectHighlights.isEmpty()}
    <p class="home-pane-summary">{i18n.home_project_no_data}</p>
    {#else}
    <div class="home-contributor-grid home-contributor-grid-compact">
      {#for contributor in projectHighlights}
      <a href="{contributor.htmlUrl}" target="_blank" rel="noopener noreferrer" class="home-contributor-card"
        title="{contributor.login}">
        <span class="home-contributor-avatar-shell">
          <img src="{contributor.avatarUrl}" alt="{contributor.login}" loading="lazy" class="home-contributor-avatar">
        </span>
        <span class="home-contributor-login">{contributor.login}</span>
        <span class="home-contributor-meta">{contributor.contributions} {i18n.home_project_contribs_unit}</span>
      </a>
      {/for}
    </div>
    {/if}

    <div class="home-project-actions-row">
      <a href="/proyectos" class="btn-primary">{i18n.home_btn_explore_tracks}</a>
      <a href="https://github.com/os-santiago/homedir" target="_blank" rel="noopener noreferrer" class="btn-primary">
        {i18n.home_btn_view_repo}
      </a>
    </div>
  </article>
</section>
{/body}
{/include}
