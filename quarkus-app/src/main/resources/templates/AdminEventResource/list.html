{#include layout/base}
{#title}Eventos{/title}
{#breadcrumbs}<a href="/private/admin">Admin</a><span class="sep">/</span><span>Eventos</span>{/breadcrumbs}
{#main}
<section class="admin-page">
    <div class="admin-header">
        <div>
            <h1 class="page-title"><span class="icon">üóìÔ∏è</span>Eventos</h1>
            {#if message}
                <p class="section-subtitle">{message}</p>
            {/if}
        </div>
    </div>
    <div class="admin-card">
        <h2 class="card-title">Acciones</h2>
        <div class="admin-actions">
            <a href="/private/admin/events/new" class="btn">Nuevo evento</a>
            <form method="post" action="/private/admin/events/import" enctype="multipart/form-data" class="admin-form">
                <label for="importFile">Importar JSON</label>
                <input id="importFile" type="file" name="file" accept="application/json">
                <button type="submit" class="btn btn-secondary">Importar</button>
            </form>
        </div>
    </div>
    {#if events.isEmpty()}
        <div class="admin-card">
            <p class="no-events">No hay eventos registrados.</p>
        </div>
    {#else}
        <div class="admin-card admin-table-wrapper">
            <table class="table admin-table">
                <thead><tr><th>ID</th><th>T√≠tulo</th><th>Acciones</th></tr></thead>
                <tbody>
                {#for ev in events}
                    <tr>
                        <td>{ev.id}</td>
                        <td>{ev.title}</td>
                        <td class="action-group">
                            <a href="/private/admin/events/{ev.id}/edit" class="btn btn-secondary">Editar</a>
                            <a href="/private/admin/metrics?event={ev.id}&amp;range=all" class="btn btn-secondary">Ver m√©tricas</a>
                            <form method="post" action="/private/admin/events/{ev.id}/delete" style="display:inline" class="needs-confirm">
                                <button type="submit" class="btn btn-secondary">Eliminar</button>
                            </form>
                        </td>
                    </tr>
                {/for}
                </tbody>
            </table>
        </div>
    {/if}
    <a href="/private/admin" class="btn btn-secondary">Volver</a>
</section>
{/main}
{/include}
