{#include layout/main activePage="community"}
{#title}Comunidad - HomeDir{/title}
{#body}
<nav class="breadcrumbs"><span>Inicio</span> / <strong>Comunidad</strong></nav>

<header class="page-header">
  <div class="section-header">
    <p class="section-subtitle">Personas · Comunidad</p>
    <h1>Construimos Homedir juntos</h1>
  </div>
  <p class="section-subtitle">Explora el directorio de integrantes, conecta con la comunidad y únete usando tu cuenta
    vinculada de GitHub.</p>

  <div class="main-sections" style="margin-top: 2rem;">
    <div class="section-card">
      <p class="eyebrow">Integrantes</p>
      <h2>{vm.memberCount}</h2>
      <p>Activos en la comunidad</p>
    </div>
    <div class="section-card">
      <p class="eyebrow">Visibilidad</p>
      <h2>GitHub</h2>
      <p>Se muestra tu usuario</p>
    </div>
    <div class="section-card">
      <p class="eyebrow">Acceso</p>
      <h2>Roles</h2>
      <p>Colaborador · Administrador</p>
    </div>
  </div>

  <div style="margin-top: 2rem; display: flex; gap: 1rem; flex-wrap: wrap;">
    <a class="btn-primary" href="/private/profile">Ingresar y unirme</a>
    <a class="btn-primary" href="#directorio"
      style="background: transparent; border: 1px solid white; color: white;">Ver directorio</a>
  </div>
</header>

<section class="page-grid">
  <div class="section-header" style="grid-column: 1 / -1; margin-top: 2rem;" id="directorio">
    <div style="display: flex; justify-content: space-between; align-items: flex-end; flex-wrap: wrap; gap: 1rem;">
      <div>
        <p class="section-subtitle">Directorio</p>
        <h2 class="page-title">Personas de la comunidad</h2>
      </div>
      <form class="search-form" method="get" action="/comunidad" style="display: flex; gap: 0.5rem;">
        <input type="search" name="q" value="" placeholder="Buscar por nombre o GitHub" aria-label="Buscar integrante"
          style="background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 0.5rem; font-family: var(--font-body);">
        <button class="btn-primary" type="submit" style="padding: 0.5rem 1rem;">Buscar</button>
      </form>
    </div>
  </div>

  {#if vm.members.isEmpty()}
  <div class="section-card" style="grid-column: 1 / -1;">
    <p>Aún no hay integrantes visibles con este filtro.</p>
  </div>
  {#else}
  {#for member in vm.members}
  <div class="section-card">
    <!-- Member card content would go here, assuming vm.members has data structure similar to what was intended -->
    <h3>{member.displayName}</h3>
    {#if member.role}<p class="eyebrow">{member.role}</p>{/if}
    {#if member.github}<p>@{member.github}</p>{/if}
  </div>
  {/for}
  {/if}
</section>
{/body}
{/include}