{#include layout/main}

{#title}Broadcast de notificaciones · Homedir{/title}

{#body}
<section class="hd-section hd-section-dashboard">
  <div class="hd-page">
    <div class="hd-dashboard-header">
      <div>
        <p class="hd-eyebrow">Administración</p>
        <h1 class="hd-page-title">Broadcast de notificaciones</h1>
        <p class="hd-page-intro">Envía y gestiona avisos globales para todos los usuarios conectados.</p>
      </div>
      <div class="hd-panel-actions">
        <a href="/admin/notifications/sim" class="hd-btn">Simular notificaciones</a>
        <a href="/private/admin" class="hd-btn hd-btn-secondary">Volver al panel</a>
      </div>
    </div>

    <div class="hd-panel">
      <h2 class="hd-panel-title">Emitir broadcast</h2>
      <form id="broadcast" class="hd-form" aria-label="Broadcast de notificaciones">
        <div class="hd-form-grid">
          <div class="hd-form-field">
            <label for="type" class="hd-form-label">Tipo de notificación</label>
            <select id="type" name="type" class="hd-form-input">
              <option>AGENDA_UPDATED</option>
              <option>ANNOUNCEMENT</option>
            </select>
          </div>
          <div class="hd-form-field">
            <label for="eventId" class="hd-form-label">ID de evento (opcional)</label>
            <input id="eventId" class="hd-form-input" name="eventId" placeholder="eventId (opcional)">
          </div>
          <div class="hd-form-field">
            <label for="expiresMinutes" class="hd-form-label">Expira en minutos</label>
            <input id="expiresMinutes" class="hd-form-input" name="expiresMinutes" type="number" min="1"
              placeholder="Duración (opcional)">
          </div>
        </div>
        <div class="hd-form-field">
          <label for="title" class="hd-form-label">Título</label>
          <input id="title" class="hd-form-input" name="title" placeholder="Título" required>
        </div>
        <div class="hd-form-field">
          <label for="message" class="hd-form-label">Mensaje</label>
          <textarea id="message" class="hd-form-input" name="message" placeholder="Mensaje" required></textarea>
        </div>
        <div class="hd-form-actions">
          <button class="hd-btn hd-btn-primary" type="submit">Enviar a todos</button>
          <span class="hd-form-hint">Se emite a todos los conectados; persistirá en el backlog global.</span>
        </div>
      </form>
    </div>

    <div class="hd-panel hd-panel-actions">
      <button id="broadcast-demo" class="hd-btn hd-btn-secondary" type="button">Broadcast demo</button>
      <button id="clearAll" class="hd-btn" type="button">Borrar backlog</button>
    </div>

    <div class="hd-panel">
      <h2 class="hd-panel-title">Últimas notificaciones</h2>
      <div id="admin-list" class="hd-list" aria-live="polite"></div>

    </div>
  </div>
</section>
<script defer src="/js/admin-notifications.js"></script>
{/body}
{/include}