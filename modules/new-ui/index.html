<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HomeDir - Community Platform</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow-x: hidden;
    }

    body {
      font-family: 'Press Start 2P', 'Courier New', monospace;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #ffffff;
      overflow-y: auto;
      image-rendering: pixelated;
    }

    /* Pixelated Grid Background */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
      background-size: 20px 20px;
      pointer-events: none;
      z-index: 1;
    }

    /* Top Navigation Bar */
    .top-nav {
      position: relative;
      z-index: 100;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 2rem;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }

    .logo {
      font-size: 1.2rem;
      font-weight: 800;
      display: flex;
      align-items: center;
      gap: 1rem;
      text-transform: uppercase;
      letter-spacing: 3px;
      text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.3);
    }

    .logo-text {
      display: flex;
      flex-direction: column;
    }

    .logo-icon {
      width: 60px;
      height: 60px;
      position: relative;
      animation: logoFloat 3s ease-in-out infinite;
    }

    @keyframes logoFloat {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-5px);
      }
    }

    .logo-icon svg {
      width: 100%;
      height: 100%;
      filter: drop-shadow(3px 3px 0 rgba(0, 0, 0, 0.3)) drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
    }

    .logo-subtitle {
      font-size: 0.5rem;
      opacity: 0.85;
      font-weight: 400;
      font-family: 'Courier New', monospace;
      letter-spacing: 2px;
    }

    .nav-actions {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .login-btn-nav {
      background: rgba(255, 255, 255, 0.2);
      border: 4px solid rgba(255, 255, 255, 0.6);
      border-bottom: 6px solid rgba(0, 0, 0, 0.4);
      border-right: 4px solid rgba(0, 0, 0, 0.3);
      color: white;
      padding: 0.6rem 1.5rem;
      border-radius: 0;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.1s ease;
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 4px 0 rgba(0, 0, 0, 0.3);
    }

    .login-btn-nav:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(2px);
      box-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);
    }

    .login-btn-nav:active {
      transform: translateY(4px);
      box-shadow: 0 0 0 rgba(0, 0, 0, 0.3);
    }

    .user-menu {
      display: none;
      align-items: center;
      gap: 0.75rem;
      background: rgba(255, 255, 255, 0.15);
      padding: 0.5rem 1rem;
      border-radius: 50px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .user-menu.active {
      display: flex;
    }

    .user-avatar-small {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
    }

    .logout-btn-nav {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      padding: 0.4rem 1rem;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      font-size: 0.85rem;
    }

    .logout-btn-nav:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .floating-shapes {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }

    .shape {
      position: absolute;
      opacity: 0.1;
      animation: float 20s infinite ease-in-out;
    }

    .shape:nth-child(1) {
      width: 80px;
      height: 80px;
      top: 10%;
      left: 10%;
      animation-delay: 0s;
    }

    .shape:nth-child(2) {
      width: 60px;
      height: 60px;
      top: 60%;
      left: 80%;
      animation-delay: 5s;
    }

    .shape:nth-child(3) {
      width: 100px;
      height: 100px;
      top: 40%;
      left: 5%;
      animation-delay: 10s;
    }

    .shape:nth-child(4) {
      width: 70px;
      height: 70px;
      top: 80%;
      left: 60%;
      animation-delay: 15s;
    }

    .shape:nth-child(5) {
      width: 90px;
      height: 90px;
      top: 25%;
      left: 85%;
      animation-delay: 7s;
    }

    .shape:nth-child(6) {
      width: 75px;
      height: 75px;
      top: 70%;
      left: 15%;
      animation-delay: 12s;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      25% {
        transform: translateY(-30px) rotate(90deg);
      }
      50% {
        transform: translateY(0) rotate(180deg);
      }
      75% {
        transform: translateY(30px) rotate(270deg);
      }
    }

    .app-container {
      position: relative;
      z-index: 2;
      min-height: 100%;
      width: 100%;
    }

    .public-content {
      display: block;
    }

    .public-content.hidden {
      display: none;
    }

    /* Login Modal */
    .login-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      z-index: 200;
      align-items: center;
      justify-content: center;
    }

    .login-modal.show {
      display: flex;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .login-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 0;
      border: 6px solid rgba(102, 126, 234, 1);
      border-bottom: 10px solid rgba(0, 0, 0, 0.5);
      border-right: 8px solid rgba(0, 0, 0, 0.4);
      padding: 3rem;
      max-width: 450px;
      width: 90%;
      text-align: center;
      position: relative;
      animation: fadeInDown 0.4s ease-out, insertCoin 2s ease-in-out infinite;
      color: #333;
      box-shadow: 0 10px 0 rgba(0, 0, 0, 0.4), 0 0 30px rgba(102, 126, 234, 0.6);
    }

    @keyframes insertCoin {
      0%, 100% {
        box-shadow: 0 10px 0 rgba(0, 0, 0, 0.4), 0 0 30px rgba(102, 126, 234, 0.6);
      }
      50% {
        box-shadow: 0 10px 0 rgba(0, 0, 0, 0.4), 0 0 50px rgba(102, 126, 234, 0.9);
      }
    }

    .close-modal {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: transparent;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .close-modal:hover {
      background: rgba(0, 0, 0, 0.1);
      color: #333;
    }

    .login-card h2 {
      font-size: 1.2rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
      color: #667eea;
      text-transform: uppercase;
      letter-spacing: 3px;
      text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.2);
      font-family: 'Press Start 2P', 'Courier New', monospace;
    }

    .login-card .subtitle {
      font-size: 0.65rem;
      opacity: 0.7;
      margin-bottom: 2rem;
      color: #555;
      font-family: 'Courier New', monospace;
      letter-spacing: 1px;
    }

    .login-buttons {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .login-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      padding: 0.9rem 2rem;
      border: 4px solid #667eea;
      border-bottom: 6px solid rgba(0, 0, 0, 0.4);
      border-right: 4px solid rgba(0, 0, 0, 0.3);
      border-radius: 0;
      font-size: 0.7rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.1s ease;
      background: white;
      color: #333;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 4px 0 rgba(0, 0, 0, 0.3);
      font-family: 'Press Start 2P', 'Courier New', monospace;
    }

    .login-btn:hover {
      transform: translateY(2px);
      box-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);
      background: #f0f0f0;
    }

    .login-btn:active {
      transform: translateY(4px);
      box-shadow: 0 0 0 rgba(0, 0, 0, 0.3);
    }

    .login-btn svg {
      width: 20px;
      height: 20px;
    }

    /* Public Page Header */
    .public-header {
      text-align: center;
      padding: 4rem 2rem 3rem;
      animation: fadeInDown 1s ease-out;
    }

    .public-header h1 {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 1rem;
      letter-spacing: 5px;
      text-transform: uppercase;
      text-shadow: 4px 4px 0 rgba(0, 0, 0, 0.4), 0 0 20px rgba(255, 255, 255, 0.6);
      animation: neonFlicker 3s ease-in-out infinite;
    }

    @keyframes neonFlicker {
      0%, 100% {
        text-shadow: 4px 4px 0 rgba(0, 0, 0, 0.4), 0 0 20px rgba(255, 255, 255, 0.6);
      }
      50% {
        text-shadow: 4px 4px 0 rgba(0, 0, 0, 0.4), 0 0 30px rgba(255, 255, 255, 0.8), 0 0 40px rgba(255, 255, 255, 0.4);
      }
    }

    .public-header .tagline {
      font-size: 0.7rem;
      opacity: 0.9;
      font-weight: 300;
      font-family: 'Courier New', monospace;
      letter-spacing: 2px;
    }

    /* Main Sections */
    .main-sections {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      padding: 0 2rem 4rem;
    }

    .section-card {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border-radius: 0;
      padding: 2.5rem;
      border: 4px solid rgba(255, 255, 255, 0.6);
      border-bottom: 8px solid rgba(0, 0, 0, 0.4);
      border-right: 6px solid rgba(0, 0, 0, 0.3);
      transition: all 0.1s ease;
      animation: fadeInUp 1s ease-out;
      animation-fill-mode: both;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      box-shadow: 0 8px 0 rgba(0, 0, 0, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1);
    }

    .section-card:nth-child(1) {
      animation-delay: 0.2s;
    }

    .section-card:nth-child(2) {
      animation-delay: 0.4s;
    }

    .section-card:nth-child(3) {
      animation-delay: 0.6s;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .section-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: rotate(45deg);
      transition: all 0.5s ease;
    }

    .section-card:hover::before {
      left: 100%;
    }

    .section-card:hover {
      transform: translateY(4px);
      box-shadow: 0 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 30px rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.25);
      animation: glitch 0.3s ease-in-out;
    }

    @keyframes glitch {
      0%, 100% {
        transform: translateY(4px);
      }
      25% {
        transform: translateY(4px) translateX(-2px);
      }
      75% {
        transform: translateY(4px) translateX(2px);
      }
    }

    .icon-wrapper {
      width: 80px;
      height: 80px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 0;
      border: 3px solid rgba(255, 255, 255, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1.5rem;
      animation: pulse 2s ease-in-out infinite, powerUp 3s ease-in-out infinite;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }

    @keyframes powerUp {
      0%, 100% {
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
      }
      50% {
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.6), 0 0 30px rgba(255, 255, 255, 0.3);
      }
    }

    .icon-wrapper svg {
      width: 40px;
      height: 40px;
      stroke: white;
      fill: none;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    .section-card h2 {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 1rem;
      text-transform: uppercase;
      letter-spacing: 3px;
      text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.3), 0 0 10px rgba(255, 255, 255, 0.5);
    }

    .section-card p {
      font-size: 0.65rem;
      opacity: 0.9;
      line-height: 1.8;
      font-family: 'Courier New', monospace;
      letter-spacing: 1px;
    }

    .activity-dots {
      display: flex;
      gap: 0.5rem;
      margin-top: 1.5rem;
      align-items: center;
    }

    .dot {
      width: 8px;
      height: 8px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 0;
      animation: blink 2s ease-in-out infinite;
      box-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
    }

    .dot:nth-child(1) {
      animation-delay: 0s;
    }

    .dot:nth-child(2) {
      animation-delay: 0.3s;
    }

    .dot:nth-child(3) {
      animation-delay: 0.6s;
    }

    @keyframes blink {
      0%, 100% {
        opacity: 0.3;
        transform: scale(1);
      }
      50% {
        opacity: 1;
        transform: scale(1.2);
      }
    }

    .activity-text {
      font-size: 0.65rem;
      opacity: 0.8;
      margin-left: 0.5rem;
      font-family: 'Courier New', monospace;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    /* Scanline Effect */
    .app-container::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.15),
        rgba(0, 0, 0, 0.15) 1px,
        transparent 1px,
        transparent 2px
      );
      pointer-events: none;
      z-index: 1000;
      animation: scanline 8s linear infinite;
    }

    @keyframes scanline {
      0% {
        transform: translateY(0);
      }
      100% {
        transform: translateY(10px);
      }
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.95);
      color: #333;
      padding: 1rem 1.5rem;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      display: none;
      animation: slideIn 0.3s ease-out;
    }

    .toast.show {
      display: block;
    }

    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* Loading State */
    .loading {
      opacity: 0.6;
      pointer-events: none;
    }

    /* Character Sheet Footer */
    .character-sheet {
      position: relative;
      z-index: 100;
      background: rgba(0, 0, 0, 0.6);
      border-top: 4px solid rgba(255, 215, 0, 0.8);
      padding: 2rem;
      margin-top: 4rem;
      backdrop-filter: blur(10px);
      box-shadow: inset 0 0 30px rgba(255, 215, 0, 0.2);
    }

    .character-container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .character-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 3px solid rgba(255, 215, 0, 0.5);
    }

    .character-title {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .character-title h3 {
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 3px;
      color: #FFD700;
      text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5), 0 0 10px rgba(255, 215, 0, 0.6);
    }

    .character-class {
      background: rgba(255, 215, 0, 0.2);
      border: 2px solid #FFD700;
      padding: 0.3rem 0.8rem;
      font-size: 0.6rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: #FFD700;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);
    }

    .character-level {
      background: rgba(255, 215, 0, 0.3);
      border: 3px solid #FFD700;
      border-bottom: 5px solid rgba(0, 0, 0, 0.5);
      border-right: 4px solid rgba(0, 0, 0, 0.4);
      padding: 0.5rem 1.5rem;
      font-size: 1.2rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: #FFD700;
      text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
      box-shadow: 0 4px 0 rgba(0, 0, 0, 0.4), 0 0 15px rgba(255, 215, 0, 0.5);
      animation: levelPulse 2s ease-in-out infinite;
    }

    @keyframes levelPulse {
      0%, 100% {
        box-shadow: 0 4px 0 rgba(0, 0, 0, 0.4), 0 0 15px rgba(255, 215, 0, 0.5);
      }
      50% {
        box-shadow: 0 4px 0 rgba(0, 0, 0, 0.4), 0 0 25px rgba(255, 215, 0, 0.8);
      }
    }

    .character-main {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
      gap: 2rem;
      margin-bottom: 2rem;
    }

    .character-vitals {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .vital-bar {
      background: rgba(0, 0, 0, 0.5);
      border: 3px solid rgba(255, 255, 255, 0.3);
      padding: 0.8rem;
      position: relative;
      overflow: hidden;
    }

    .vital-label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
      font-size: 0.65rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      z-index: 2;
      position: relative;
    }

    .vital-name {
      color: #FFD700;
      text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
    }

    .vital-value {
      color: #ffffff;
      font-weight: bold;
    }

    .vital-progress {
      height: 20px;
      background: rgba(0, 0, 0, 0.7);
      border: 2px solid rgba(255, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
    }

    .vital-fill {
      height: 100%;
      transition: width 0.5s ease;
      position: relative;
      box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.3);
    }

    .vital-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        90deg,
        transparent,
        transparent 10px,
        rgba(255, 255, 255, 0.1) 10px,
        rgba(255, 255, 255, 0.1) 20px
      );
      animation: progressShine 2s linear infinite;
    }

    @keyframes progressShine {
      0% {
        transform: translateX(-20px);
      }
      100% {
        transform: translateX(20px);
      }
    }

    .hp-fill {
      background: linear-gradient(90deg, #ff4444, #ff6666);
    }

    .sp-fill {
      background: linear-gradient(90deg, #4444ff, #6666ff);
    }

    .xp-fill {
      background: linear-gradient(90deg, #FFD700, #FFA500);
    }

    .character-stats {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    .stat-box {
      background: rgba(0, 0, 0, 0.5);
      border: 3px solid rgba(255, 255, 255, 0.2);
      border-bottom: 4px solid rgba(0, 0, 0, 0.5);
      padding: 1rem;
      text-align: center;
      position: relative;
      overflow: hidden;
      transition: all 0.2s ease;
    }

    .stat-box:hover {
      border-color: rgba(255, 215, 0, 0.5);
      transform: translateY(-2px);
      box-shadow: 0 4px 0 rgba(0, 0, 0, 0.4), 0 0 15px rgba(255, 215, 0, 0.3);
    }

    .stat-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.2), transparent);
      transition: left 0.5s ease;
    }

    .stat-box:hover::before {
      left: 100%;
    }

    .stat-icon {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
      filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.5));
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: #FFD700;
      text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
      margin-bottom: 0.3rem;
    }

    .stat-label {
      font-size: 0.55rem;
      color: rgba(255, 255, 255, 0.7);
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    /* Equipment Inventory */
    .character-equipment {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .equipment-header {
      background: rgba(255, 215, 0, 0.2);
      border: 2px solid #FFD700;
      border-bottom: 3px solid rgba(0, 0, 0, 0.5);
      padding: 0.6rem;
      text-align: center;
      margin-bottom: 0.5rem;
    }

    .equipment-header h4 {
      font-size: 0.65rem;
      color: #FFD700;
      text-transform: uppercase;
      letter-spacing: 2px;
      text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
    }

    .equipment-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.5rem;
    }

    .equipment-slot {
      aspect-ratio: 1;
      background: rgba(0, 0, 0, 0.6);
      border: 3px solid rgba(255, 255, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      position: relative;
      transition: all 0.2s ease;
      cursor: pointer;
      overflow: hidden;
    }

    .equipment-slot::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 2px,
        rgba(255, 255, 255, 0.03) 2px,
        rgba(255, 255, 255, 0.03) 4px
      );
    }

    .equipment-slot.empty {
      color: rgba(255, 255, 255, 0.2);
      font-size: 1.5rem;
    }

    .equipment-slot.empty::after {
      content: '?';
      position: absolute;
      font-size: 1.5rem;
      opacity: 0.3;
      animation: questionPulse 2s ease-in-out infinite;
    }

    @keyframes questionPulse {
      0%, 100% {
        opacity: 0.2;
        transform: scale(1);
      }
      50% {
        opacity: 0.4;
        transform: scale(1.1);
      }
    }

    .equipment-slot.filled {
      border-color: #FFD700;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.4), inset 0 0 20px rgba(255, 215, 0, 0.1);
      animation: itemGlow 3s ease-in-out infinite;
    }

    @keyframes itemGlow {
      0%, 100% {
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.4), inset 0 0 20px rgba(255, 215, 0, 0.1);
      }
      50% {
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.6), inset 0 0 30px rgba(255, 215, 0, 0.2);
      }
    }

    .equipment-slot:hover {
      transform: translateY(-3px);
      border-color: #FFD700;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
    }

    .equipment-slot.filled:hover {
      animation: itemShine 0.5s ease-in-out;
    }

    @keyframes itemShine {
      0%, 100% {
        filter: brightness(1);
      }
      50% {
        filter: brightness(1.3);
      }
    }

    .equipment-rarity {
      position: absolute;
      top: 3px;
      right: 3px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      box-shadow: 0 0 5px currentColor;
    }

    .rarity-common {
      background: #9e9e9e;
    }

    .rarity-rare {
      background: #4169e1;
      animation: rarityPulse 2s ease-in-out infinite;
    }

    .rarity-epic {
      background: #9c27b0;
      animation: rarityPulse 2s ease-in-out infinite;
    }

    .rarity-legendary {
      background: #FFD700;
      animation: rarityPulse 1.5s ease-in-out infinite;
    }

    @keyframes rarityPulse {
      0%, 100% {
        box-shadow: 0 0 5px currentColor;
      }
      50% {
        box-shadow: 0 0 15px currentColor;
      }
    }

    .equipment-tooltip {
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.95);
      border: 2px solid #FFD700;
      padding: 0.5rem;
      font-size: 0.55rem;
      white-space: nowrap;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.2s ease;
      z-index: 10;
      margin-bottom: 0.3rem;
      letter-spacing: 1px;
    }

    .equipment-slot:hover .equipment-tooltip {
      opacity: 1;
    }

    .equipment-count {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0, 0, 0, 0.8);
      font-size: 0.5rem;
      padding: 0.2rem;
      text-align: center;
      color: #FFD700;
      letter-spacing: 1px;
    }

    .character-actions {
      display: flex;
      gap: 1rem;
      justify-content: center;
      padding-top: 1rem;
      border-top: 2px solid rgba(255, 215, 0, 0.3);
    }

    .character-action-btn {
      background: rgba(255, 215, 0, 0.2);
      border: 4px solid #FFD700;
      border-bottom: 6px solid rgba(0, 0, 0, 0.5);
      border-right: 4px solid rgba(0, 0, 0, 0.4);
      color: #FFD700;
      padding: 0.8rem 2rem;
      font-size: 0.7rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.1s ease;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 4px 0 rgba(0, 0, 0, 0.4), 0 0 15px rgba(255, 215, 0, 0.3);
      position: relative;
      overflow: hidden;
    }

    .character-action-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 215, 0, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.3s ease, height 0.3s ease;
    }

    .character-action-btn:hover::before {
      width: 100%;
      height: 100%;
    }

    .character-action-btn:hover {
      background: rgba(255, 215, 0, 0.3);
      transform: translateY(2px);
      box-shadow: 0 2px 0 rgba(0, 0, 0, 0.4), 0 0 20px rgba(255, 215, 0, 0.5);
    }

    .character-action-btn:active {
      transform: translateY(4px);
      box-shadow: 0 0 0 rgba(0, 0, 0, 0.4), 0 0 10px rgba(255, 215, 0, 0.3);
    }

    .character-action-btn span {
      position: relative;
      z-index: 2;
    }

    .novice-warning {
      background: rgba(255, 69, 0, 0.2);
      border: 2px solid #ff4500;
      border-left: 6px solid #ff4500;
      padding: 1rem;
      margin-bottom: 1.5rem;
      font-size: 0.65rem;
      letter-spacing: 1px;
      color: #ffaa00;
      text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.5);
      animation: warningBlink 2s ease-in-out infinite;
    }

    @keyframes warningBlink {
      0%, 100% {
        background: rgba(255, 69, 0, 0.2);
      }
      50% {
        background: rgba(255, 69, 0, 0.3);
      }
    }

    .novice-warning::before {
      content: '⚠️ ';
      font-size: 1rem;
    }

    @media (max-width: 768px) {
      .character-sheet {
        padding: 1.5rem 1rem;
      }

      .character-header {
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
      }

      .character-main {
        grid-template-columns: 1fr;
      }

      .character-stats {
        grid-template-columns: repeat(2, 1fr);
      }

      .equipment-grid {
        grid-template-columns: repeat(4, 1fr);
      }

      .character-actions {
        flex-direction: column;
      }

      .character-action-btn {
        width: 100%;
      }
    }

    /* Community Village View */
    .community-view {
      position: relative;
      z-index: 2;
      width: 100%;
      min-height: 100%;
      padding: 2rem;
    }

    .back-button {
      position: fixed;
      top: 100px;
      left: 2rem;
      background: rgba(255, 215, 0, 0.2);
      border: 4px solid #FFD700;
      border-bottom: 6px solid rgba(0, 0, 0, 0.5);
      border-right: 4px solid rgba(0, 0, 0, 0.4);
      color: #FFD700;
      padding: 0.8rem 1.5rem;
      font-size: 0.7rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.1s ease;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 4px 0 rgba(0, 0, 0, 0.4);
      z-index: 1000;
    }

    .back-button:hover {
      background: rgba(255, 215, 0, 0.3);
      transform: translateY(2px);
      box-shadow: 0 2px 0 rgba(0, 0, 0, 0.4);
    }

    .back-button:active {
      transform: translateY(4px);
      box-shadow: 0 0 0 rgba(0, 0, 0, 0.4);
    }

    .village-container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .village-header {
      text-align: center;
      margin-bottom: 2rem;
      animation: fadeInDown 0.6s ease-out;
    }

    .village-header h2 {
      font-size: 1.8rem;
      text-transform: uppercase;
      letter-spacing: 4px;
      color: #FFD700;
      text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.4), 0 0 20px rgba(255, 215, 0, 0.6);
      margin-bottom: 0.5rem;
    }

    .village-subtitle {
      font-size: 0.7rem;
      opacity: 0.9;
      letter-spacing: 2px;
      font-family: 'Courier New', monospace;
    }

    .village-landscape {
      position: relative;
      width: 100%;
      height: 700px;
      background: linear-gradient(to bottom, #1a1a2e 0%, #16213e 40%, #0f3460 100%);
      border: 6px solid rgba(102, 126, 234, 0.5);
      border-bottom: 10px solid rgba(0, 0, 0, 0.6);
      overflow: hidden;
      margin-bottom: 2rem;
      box-shadow: inset 0 0 80px rgba(102, 126, 234, 0.3), 0 0 40px rgba(102, 126, 234, 0.2);
    }

    /* Tech Sky - Stars and Data Streams */
    .village-sky {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .tech-logo {
      position: absolute;
      top: 5%;
      right: 8%;
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 50%;
      border: 4px solid rgba(255, 215, 0, 0.6);
      box-shadow: 0 0 40px rgba(102, 126, 234, 0.8), 0 0 80px rgba(102, 126, 234, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      animation: logoPulse 4s ease-in-out infinite;
    }

    /* Admin Platform */
    .admin-platform {
      position: absolute;
      top: 5%;
      left: 50%;
      transform: translateX(-50%);
      width: 600px;
      height: 120px;
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 165, 0, 0.2));
      border: 4px solid rgba(255, 215, 0, 0.8);
      border-radius: 12px;
      box-shadow: 0 0 40px rgba(255, 215, 0, 0.6), inset 0 0 30px rgba(255, 215, 0, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      padding: 1rem 2rem;
      z-index: 50;
      backdrop-filter: blur(10px);
      animation: adminGlow 3s ease-in-out infinite;
    }

    @keyframes adminGlow {
      0%, 100% {
        box-shadow: 0 0 40px rgba(255, 215, 0, 0.6), inset 0 0 30px rgba(255, 215, 0, 0.2);
      }
      50% {
        box-shadow: 0 0 60px rgba(255, 215, 0, 0.9), inset 0 0 40px rgba(255, 215, 0, 0.3);
      }
    }

    .admin-platform::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, #FFD700, #FFA500, #FFD700);
      background-size: 200% 100%;
      animation: platformShine 2s linear infinite;
    }

    @keyframes platformShine {
      0% {
        background-position: 0% 0%;
      }
      100% {
        background-position: 200% 0%;
      }
    }

    .platform-label {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: #000;
      font-size: 0.5rem;
      font-weight: bold;
      padding: 0.4rem 1rem;
      border-radius: 8px;
      border: 3px solid rgba(102, 126, 234, 0.8);
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
      letter-spacing: 2px;
      text-transform: uppercase;
      animation: labelFloat 2s ease-in-out infinite;
    }

    @keyframes labelFloat {
      0%, 100% {
        transform: translateX(-50%) translateY(0);
      }
      50% {
        transform: translateX(-50%) translateY(-3px);
      }
    }

    .admin-member {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      animation: adminFloat 4s ease-in-out infinite;
      position: relative;
    }

    .admin-member:hover {
      transform: scale(1.2) translateY(-5px);
      z-index: 100;
    }

    @keyframes adminFloat {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-8px);
      }
    }

    .admin-avatar {
      font-size: 3rem;
      filter: drop-shadow(0 0 15px rgba(255, 215, 0, 1));
      margin-bottom: 0.5rem;
      position: relative;
      animation: crownShine 3s ease-in-out infinite;
    }

    @keyframes crownShine {
      0%, 100% {
        filter: drop-shadow(0 0 15px rgba(255, 215, 0, 1));
      }
      50% {
        filter: drop-shadow(0 0 25px rgba(255, 215, 0, 1)) drop-shadow(0 0 35px rgba(255, 165, 0, 0.8));
      }
    }

    .admin-crown {
      position: absolute;
      top: -15px;
      right: -10px;
      font-size: 1.5rem;
      filter: drop-shadow(0 0 10px rgba(255, 215, 0, 1));
      animation: rotateCrown 4s linear infinite;
    }

    @keyframes rotateCrown {
      0%, 100% {
        transform: rotate(-15deg);
      }
      50% {
        transform: rotate(15deg);
      }
    }

    .admin-name {
      font-size: 0.5rem;
      color: #FFD700;
      background: rgba(0, 0, 0, 0.7);
      padding: 0.3rem 0.7rem;
      border-radius: 8px;
      border: 2px solid rgba(255, 215, 0, 0.8);
      white-space: nowrap;
      letter-spacing: 1px;
      text-transform: uppercase;
      font-weight: bold;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
    }

    .admin-title {
      font-size: 0.4rem;
      color: rgba(255, 255, 255, 0.9);
      margin-top: 0.2rem;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    @keyframes logoPulse {
      0%, 100% {
        transform: scale(1) rotate(0deg);
        box-shadow: 0 0 40px rgba(102, 126, 234, 0.8), 0 0 80px rgba(102, 126, 234, 0.4);
      }
      50% {
        transform: scale(1.08) rotate(5deg);
        box-shadow: 0 0 60px rgba(102, 126, 234, 1), 0 0 100px rgba(102, 126, 234, 0.6);
      }
    }

    .star {
      position: absolute;
      background: #FFD700;
      border-radius: 50%;
      animation: starTwinkle 3s ease-in-out infinite;
    }

    .star-1 {
      width: 3px;
      height: 3px;
      top: 12%;
      left: 15%;
      animation-delay: 0s;
    }

    .star-2 {
      width: 4px;
      height: 4px;
      top: 20%;
      left: 35%;
      animation-delay: 1s;
    }

    .star-3 {
      width: 2px;
      height: 2px;
      top: 15%;
      left: 65%;
      animation-delay: 2s;
    }

    .star-4 {
      width: 3px;
      height: 3px;
      top: 25%;
      left: 80%;
      animation-delay: 1.5s;
    }

    .star-5 {
      width: 4px;
      height: 4px;
      top: 8%;
      left: 45%;
      animation-delay: 0.5s;
    }

    @keyframes starTwinkle {
      0%, 100% {
        opacity: 0.3;
        transform: scale(1);
      }
      50% {
        opacity: 1;
        transform: scale(1.5);
      }
    }

    .data-stream {
      position: absolute;
      width: 2px;
      height: 60px;
      background: linear-gradient(to bottom, transparent, rgba(102, 126, 234, 0.8), transparent);
      animation: dataFlow 4s linear infinite;
    }

    .stream-1 {
      top: -60px;
      left: 25%;
      animation-delay: 0s;
    }

    .stream-2 {
      top: -60px;
      left: 50%;
      animation-delay: 1.5s;
    }

    .stream-3 {
      top: -60px;
      left: 75%;
      animation-delay: 3s;
    }

    @keyframes dataFlow {
      0% {
        transform: translateY(0);
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        transform: translateY(400px);
        opacity: 0;
      }
    }

    /* Tech Grid Floor */
    .tech-grid {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 50%;
      background: 
        linear-gradient(rgba(102, 126, 234, 0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(102, 126, 234, 0.1) 1px, transparent 1px);
      background-size: 40px 40px;
      z-index: 2;
      animation: gridScroll 20s linear infinite;
      transform-style: preserve-3d;
      perspective: 500px;
    }

    @keyframes gridScroll {
      0% {
        background-position: 0 0;
      }
      100% {
        background-position: 0 40px;
      }
    }

    /* Tech Campus Ground */
    .village-ground {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 50%;
      z-index: 3;
    }

    .innovation-hub {
      position: absolute;
      left: 50%;
      bottom: 18%;
      transform: translateX(-50%);
      width: 140px;
      height: 140px;
      background: radial-gradient(circle, rgba(102, 126, 234, 0.3), rgba(118, 75, 162, 0.2));
      border: 4px solid rgba(102, 126, 234, 0.6);
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 40px rgba(102, 126, 234, 0.6), inset 0 0 30px rgba(102, 126, 234, 0.3);
      animation: hubPulse 3s ease-in-out infinite;
    }

    @keyframes hubPulse {
      0%, 100% {
        transform: translateX(-50%) scale(1);
        box-shadow: 0 0 40px rgba(102, 126, 234, 0.6), inset 0 0 30px rgba(102, 126, 234, 0.3);
      }
      50% {
        transform: translateX(-50%) scale(1.05);
        box-shadow: 0 0 60px rgba(102, 126, 234, 0.8), inset 0 0 40px rgba(102, 126, 234, 0.4);
      }
    }

    .hub-icon {
      font-size: 3rem;
      margin-bottom: 0.3rem;
      filter: drop-shadow(0 0 10px rgba(102, 126, 234, 0.8));
    }

    .hub-label {
      font-size: 0.5rem;
      color: #FFD700;
      letter-spacing: 2px;
      text-transform: uppercase;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
    }

    /* Tech Department Pods */
    .department {
      position: absolute;
      width: 100px;
      height: 120px;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(118, 75, 162, 0.3));
      border: 4px solid rgba(102, 126, 234, 0.6);
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      cursor: pointer;
      box-shadow: 0 8px 0 rgba(0, 0, 0, 0.4), 0 0 20px rgba(102, 126, 234, 0.4);
      backdrop-filter: blur(10px);
      overflow: hidden;
    }

    .department::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
      background-size: 200% 100%;
      animation: departmentGlow 3s linear infinite;
    }

    @keyframes departmentGlow {
      0% {
        background-position: 0% 0%;
      }
      100% {
        background-position: 200% 0%;
      }
    }

    .department:hover {
      transform: translateY(-8px) scale(1.08);
      box-shadow: 0 12px 0 rgba(0, 0, 0, 0.4), 0 0 40px rgba(102, 126, 234, 0.8);
      border-color: rgba(255, 215, 0, 0.8);
    }

    .department-icon {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      filter: drop-shadow(0 0 10px rgba(102, 126, 234, 0.8));
      animation: iconFloat 3s ease-in-out infinite;
    }

    @keyframes iconFloat {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-5px);
      }
    }

    .department-label {
      font-size: 0.5rem;
      color: #FFD700;
      text-align: center;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
      line-height: 1.3;
    }

    .department-subtitle {
      font-size: 0.4rem;
      color: rgba(255, 255, 255, 0.7);
      margin-top: 0.2rem;
      letter-spacing: 1px;
    }

    /* Tech Decorations - Servers & Stations */
    .tech-element {
      position: absolute;
      font-size: 2rem;
      filter: drop-shadow(0 0 8px rgba(102, 126, 234, 0.6));
      animation: techBlink 4s ease-in-out infinite;
    }

    @keyframes techBlink {
      0%, 100% {
        opacity: 0.8;
        filter: drop-shadow(0 0 8px rgba(102, 126, 234, 0.6));
      }
      50% {
        opacity: 1;
        filter: drop-shadow(0 0 15px rgba(102, 126, 234, 0.9));
      }
    }

    /* Team Members Layer */
    .inhabitants-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 10;
    }

    .team-member {
      position: absolute;
      width: 50px;
      height: 70px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      animation: memberFloat 4s ease-in-out infinite;
    }

    .team-member:hover {
      transform: scale(1.25) translateY(-8px);
      z-index: 100;
    }

    @keyframes memberFloat {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-5px);
      }
    }

    .member-avatar {
      font-size: 2.2rem;
      filter: drop-shadow(0 0 10px rgba(102, 126, 234, 0.8));
      margin-bottom: 0.3rem;
      position: relative;
    }

    .member-status {
      position: absolute;
      bottom: -2px;
      right: -2px;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      border: 2px solid #1a1a2e;
      animation: statusPulse 2s ease-in-out infinite;
    }

    .status-online {
      background: #00ff88;
      box-shadow: 0 0 8px #00ff88;
    }

    .status-busy {
      background: #ff6b6b;
      box-shadow: 0 0 8px #ff6b6b;
    }

    .status-away {
      background: #ffd93d;
      box-shadow: 0 0 8px #ffd93d;
    }

    @keyframes statusPulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.6;
      }
    }

    .member-badge {
      font-size: 0.5rem;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
      color: #FFD700;
      padding: 0.25rem 0.5rem;
      border-radius: 6px;
      white-space: nowrap;
      opacity: 0;
      transition: opacity 0.3s ease;
      letter-spacing: 1px;
      border: 2px solid rgba(255, 215, 0, 0.6);
      box-shadow: 0 0 10px rgba(102, 126, 234, 0.6);
      text-transform: uppercase;
      font-weight: bold;
    }

    .team-member:hover .member-badge {
      opacity: 1;
    }

    .member-level {
      position: absolute;
      top: -10px;
      right: -10px;
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: #000;
      font-size: 0.55rem;
      font-weight: bold;
      padding: 0.25rem 0.35rem;
      border-radius: 50%;
      border: 3px solid rgba(102, 126, 234, 0.8);
      min-width: 24px;
      text-align: center;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
      animation: levelShine 3s ease-in-out infinite;
    }

    @keyframes levelShine {
      0%, 100% {
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
      }
      50% {
        box-shadow: 0 0 25px rgba(255, 215, 0, 1);
      }
    }

    .member-role {
      position: absolute;
      bottom: -5px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.9rem;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .team-member:hover .member-role {
      opacity: 1;
    }

    /* Community Stats Panel */
    .community-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      background: rgba(0, 0, 0, 0.5);
      border: 4px solid rgba(255, 215, 0, 0.5);
      border-bottom: 6px solid rgba(0, 0, 0, 0.5);
      padding: 2rem;
      backdrop-filter: blur(10px);
    }

    .stat-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      background: rgba(255, 255, 255, 0.1);
      padding: 1rem;
      border: 2px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
    }

    .stat-item:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 215, 0, 0.5);
      transform: translateY(-2px);
    }

    .stat-item .stat-icon {
      font-size: 2.5rem;
      filter: drop-shadow(2px 2px 0 rgba(0, 0, 0, 0.3));
    }

    .stat-info {
      flex: 1;
    }

    .stat-item .stat-value {
      font-size: 2rem;
      font-weight: bold;
      color: #FFD700;
      text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
      line-height: 1;
      margin-bottom: 0.3rem;
    }

    .stat-item .stat-label {
      font-size: 0.6rem;
      opacity: 0.8;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    @media (max-width: 768px) {
      .top-nav {
        padding: 1rem;
      }

      .logo {
        font-size: 1.5rem;
      }

      .public-header h1 {
        font-size: 2.5rem;
      }

      .public-header .tagline {
        font-size: 1rem;
      }

      .main-sections {
        grid-template-columns: 1fr;
        padding: 0 1rem 3rem;
      }

      .login-card {
        padding: 2rem;
        width: 95%;
      }

      .login-card h2 {
        font-size: 1.75rem;
      }

      .village-landscape {
        height: 500px;
      }

      .back-button {
        top: 90px;
        left: 1rem;
        padding: 0.6rem 1rem;
        font-size: 0.6rem;
      }

      .admin-platform {
        width: 90%;
        height: auto;
        flex-wrap: wrap;
        gap: 1rem;
        padding: 1rem;
      }

      .admin-avatar {
        font-size: 2rem;
      }

      .admin-crown {
        font-size: 1rem;
        top: -10px;
        right: -5px;
      }

      .platform-label {
        font-size: 0.45rem;
        padding: 0.3rem 0.7rem;
      }

      .community-stats {
        grid-template-columns: 1fr;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="floating-shapes"><!-- Git Branch Icon -->
   <div class="shape">
    <svg viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><line x1="6" y1="3" x2="6" y2="15"></line> <circle cx="18" cy="6" r="3" /> <circle cx="6" cy="18" r="3" /> <path d="M18 9a9 9 0 0 1-9 9" />
    </svg>
   </div><!-- Code Brackets -->
   <div class="shape">
    <svg viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><polyline points="16 18 22 12 16 6"></polyline> <polyline points="8 6 2 12 8 18"></polyline>
    </svg>
   </div><!-- Terminal Icon -->
   <div class="shape">
    <svg viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><polyline points="4 17 10 11 4 5"></polyline> <line x1="12" y1="19" x2="20" y2="19"></line>
    </svg>
   </div><!-- Database Icon -->
   <div class="shape">
    <svg viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse> <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3" /> <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5" />
    </svg>
   </div><!-- CPU/Chip Icon -->
   <div class="shape">
    <svg viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><rect x="4" y="4" width="16" height="16" rx="2" ry="2" /> <rect x="9" y="9" width="6" height="6" /> <line x1="9" y1="1" x2="9" y2="4"></line> <line x1="15" y1="1" x2="15" y2="4"></line> <line x1="9" y1="20" x2="9" y2="23"></line> <line x1="15" y1="20" x2="15" y2="23"></line> <line x1="20" y1="9" x2="23" y2="9"></line> <line x1="20" y1="14" x2="23" y2="14"></line> <line x1="1" y1="9" x2="4" y2="9"></line> <line x1="1" y1="14" x2="4" y2="14"></line>
    </svg>
   </div><!-- API/Cloud Icon -->
   <div class="shape">
    <svg viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z" />
    </svg>
   </div>
  </div><!-- Top Navigation -->
  <nav class="top-nav">
   <div class="logo">
    <div class="logo-icon">
     <svg viewbox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><!-- Casa/Home Base --> <path d="M50 15 L85 45 L85 85 L15 85 L15 45 Z" fill="#ffffff" stroke="#ffffff" stroke-width="3" /> <!-- Techo pixelado --> <path d="M50 15 L85 45 L75 45 L50 25 L25 45 L15 45 Z" fill="#FFD700" stroke="#ffffff" stroke-width="2" /> <!-- Puerta --> <rect x="42" y="60" width="16" height="25" fill="#667eea" stroke="#ffffff" stroke-width="2" /> <!-- Ventanas con efecto digital --> <rect x="25" y="52" width="12" height="12" fill="#764ba2" stroke="#ffffff" stroke-width="2" /> <rect x="63" y="52" width="12" height="12" fill="#764ba2" stroke="#ffffff" stroke-width="2" /> <!-- Pixels decorativos (efecto digital) --> <rect x="28" y="55" width="2" height="2" fill="#ffffff" /> <rect x="32" y="55" width="2" height="2" fill="#ffffff" /> <rect x="66" y="55" width="2" height="2" fill="#ffffff" /> <rect x="70" y="55" width="2" height="2" fill="#ffffff" /> <!-- Chimenea pixelada --> <rect x="65" y="30" width="8" height="15" fill="#ffffff" stroke="#ffffff" stroke-width="2" /> <rect x="66" y="27" width="6" height="3" fill="#FFD700" /> <!-- Efecto de señal digital/wifi emanando --> <path d="M50 20 Q45 15 40 12" stroke="#FFD700" stroke-width="2" fill="none" opacity="0.6" /> <path d="M50 20 Q55 15 60 12" stroke="#FFD700" stroke-width="2" fill="none" opacity="0.6" /> <circle cx="50" cy="22" r="2" fill="#FFD700" />
     </svg>
    </div>
    <div class="logo-text"><span id="navPlatformName">HomeDir</span> <span class="logo-subtitle" id="navTagline">by OpenSourceSantiago</span>
    </div>
   </div>
   <div class="nav-actions"><button class="login-btn-nav" id="openLoginBtn">Login</button>
    <div class="user-menu" id="userMenuNav">
     <div class="user-avatar-small" id="navAvatar">
      👤
     </div><span id="navUserName">User</span> <button class="logout-btn-nav" id="logoutBtn">Logout</button>
    </div>
   </div>
  </nav>
  <div class="app-container"><!-- Public Content (Always Visible) -->
   <div class="public-content" id="publicContent">
    <header class="public-header">
     <h1 id="mainTitle">HomeDir</h1>
     <p class="tagline" id="mainTagline">by OpenSourceSantiago - The community platform to scale your teams and projects</p>
    </header>
    <main class="main-sections">
     <article class="section-card" id="communityCard">
      <div class="icon-wrapper">
       <svg viewbox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" /> <circle cx="9" cy="7" r="4" /> <path d="M23 21v-2a4 4 0 0 0-3-3.87" /> <path d="M16 3.13a4 4 0 0 1 0 7.75" />
       </svg>
      </div>
      <h2 id="communityTitle">Community</h2>
      <p id="communityDescription">Modern toolbox for community building and opensource technology innovation</p>
      <div class="activity-dots">
       <div class="dot"></div>
       <div class="dot"></div>
       <div class="dot"></div><span class="activity-text">2.4k active members</span>
      </div>
     </article>
     <article class="section-card">
      <div class="icon-wrapper">
       <svg viewbox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" /> <line x1="16" y1="2" x2="16" y2="6"></line> <line x1="8" y1="2" x2="8" y2="6"></line> <line x1="3" y1="10" x2="21" y2="10"></line>
       </svg>
      </div>
      <h2 id="eventsTitle">Events</h2>
      <p id="eventsDescription">Scale your teams with collaborative meetups and tech conferences</p>
      <div class="activity-dots">
       <div class="dot"></div>
       <div class="dot"></div>
       <div class="dot"></div><span class="activity-text">12 events this month</span>
      </div>
     </article>
     <article class="section-card">
      <div class="icon-wrapper">
       <svg viewbox="0 0 24 24"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
       </svg>
      </div>
      <h2 id="projectsTitle">Projects</h2>
      <p id="projectsDescription">Innovation hub for your opensource technology projects</p>
      <div class="activity-dots">
       <div class="dot"></div>
       <div class="dot"></div>
       <div class="dot"></div><span class="activity-text">156 active projects</span>
      </div>
     </article>
    </main>
   </div><!-- Community Village View -->
   <div class="community-view" id="communityView" style="display: none;"><button class="back-button" id="backButton">← BACK TO HOME</button>
    <div class="village-container">
     <header class="village-header">
      <h2>🚀 COMMUNITY CAMPUS</h2>
      <p class="village-subtitle">Meet our innovative team of developers, designers, and creators</p>
     </header><!-- Tech Campus Landscape -->
     <div class="village-landscape"><!-- Tech Sky with stars and data streams -->
      <div class="village-sky">
       <div class="tech-logo">
        🚀
       </div><!-- Stars -->
       <div class="star star-1"></div>
       <div class="star star-2"></div>
       <div class="star star-3"></div>
       <div class="star star-4"></div>
       <div class="star star-5"></div><!-- Data Streams -->
       <div class="data-stream stream-1"></div>
       <div class="data-stream stream-2"></div>
       <div class="data-stream stream-3"></div><!-- Admin Platform -->
       <div class="admin-platform">
        <div class="platform-label">
         🛡️ COMMUNITY PROTECTORS 🛡️
        </div>
        <div class="admin-member">
         <div class="admin-avatar">
          🛡️ 
          <div class="admin-crown">
           ⭐
          </div>
         </div>
         <div class="admin-name">
          Guardian
         </div>
         <div class="admin-title">
          Community Safety
         </div>
        </div>
        <div class="admin-member">
         <div class="admin-avatar">
          🦸‍♀️ 
          <div class="admin-crown">
           ⭐
          </div>
         </div>
         <div class="admin-name">
          Defender
         </div>
         <div class="admin-title">
          Tech Support
         </div>
        </div>
        <div class="admin-member">
         <div class="admin-avatar">
          🦸‍♂️ 
          <div class="admin-crown">
           ⭐
          </div>
         </div>
         <div class="admin-name">
          Protector
         </div>
         <div class="admin-title">
          Member Care
         </div>
        </div>
        <div class="admin-member">
         <div class="admin-avatar">
          🧙‍♀️ 
          <div class="admin-crown">
           ⭐
          </div>
         </div>
         <div class="admin-name">
          Shield
         </div>
         <div class="admin-title">
          Platform Guardian
         </div>
        </div>
       </div>
      </div><!-- Tech Grid Floor -->
      <div class="tech-grid"></div><!-- Tech Campus Ground -->
      <div class="village-ground"><!-- Central Innovation Hub -->
       <div class="innovation-hub">
        <div class="hub-icon">
         💡
        </div>
        <div class="hub-label">
         INNOVATION HUB
        </div>
       </div><!-- Department Pods -->
       <div class="department" style="left: 8%; bottom: 25%;">
        <div class="department-icon">
         ⚛️
        </div>
        <div class="department-label">
         FRONTEND
        </div>
        <div class="department-subtitle">
         React · Vue · Next.js
        </div>
       </div>
       <div class="department" style="left: 23%; bottom: 40%;">
        <div class="department-icon">
         ⚙️
        </div>
        <div class="department-label">
         BACKEND
        </div>
        <div class="department-subtitle">
         Node · Python · APIs
        </div>
       </div>
       <div class="department" style="left: 38%; bottom: 52%;">
        <div class="department-icon">
         🏗️
        </div>
        <div class="department-label">
         PLATFORM
        </div>
        <div class="department-subtitle">
         Cloud · Infra · DevOps
        </div>
       </div>
       <div class="department" style="left: 62%; bottom: 52%;">
        <div class="department-icon">
         🎨
        </div>
        <div class="department-label">
         DESIGN
        </div>
        <div class="department-subtitle">
         UI/UX · Figma · Brand
        </div>
       </div>
       <div class="department" style="left: 77%; bottom: 40%;">
        <div class="department-icon">
         📊
        </div>
        <div class="department-label">
         DATA
        </div>
        <div class="department-subtitle">
         ML · Analytics · AI
        </div>
       </div><!-- Tech Elements (decorative) -->
       <div class="tech-element" style="left: 8%; bottom: 45%;">
        🖥️
       </div>
       <div class="tech-element" style="left: 22%; bottom: 50%; animation-delay: 1s;">
        💾
       </div>
       <div class="tech-element" style="left: 44%; bottom: 48%; animation-delay: 2s;">
        🔧
       </div>
       <div class="tech-element" style="left: 68%; bottom: 52%; animation-delay: 1.5s;">
        🛠️
       </div>
       <div class="tech-element" style="left: 85%; bottom: 46%; animation-delay: 0.5s;">
        📡
       </div><!-- Team Members Layer (populated dynamically) -->
       <div class="inhabitants-layer" id="inhabitantsLayer"></div>
      </div>
     </div><!-- Community Stats Panel -->
     <div class="community-stats">
      <div class="stat-item">
       <div class="stat-icon">
        👥
       </div>
       <div class="stat-info">
        <div class="stat-value" id="totalMembers">
         0
        </div>
        <div class="stat-label">
         Total Members
        </div>
       </div>
      </div>
      <div class="stat-item">
       <div class="stat-icon">
        ⭐
       </div>
       <div class="stat-info">
        <div class="stat-value" id="totalXP">
         0
        </div>
        <div class="stat-label">
         Total XP
        </div>
       </div>
      </div>
      <div class="stat-item">
       <div class="stat-icon">
        🏆
       </div>
       <div class="stat-info">
        <div class="stat-value" id="totalQuests">
         0
        </div>
        <div class="stat-label">
         Quests Completed
        </div>
       </div>
      </div>
      <div class="stat-item">
       <div class="stat-icon">
        🚀
       </div>
       <div class="stat-info">
        <div class="stat-value" id="totalProjects">
         0
        </div>
        <div class="stat-label">
         Active Projects
        </div>
       </div>
      </div>
     </div>
    </div>
   </div><!-- Character Sheet Footer -->
   <footer class="character-sheet">
    <div class="character-container"><!-- Novice Warning (only shown when not logged in) -->
     <div class="novice-warning" id="noviceWarning">
      You're playing as a NOVICE guest! Login to save your progress and unlock your full character potential!
     </div><!-- Character Header -->
     <div class="character-header">
      <div class="character-title">
       <h3 id="characterName">NOVICE GUEST</h3><span class="character-class" id="characterClass">VISITOR</span>
      </div>
      <div class="character-level" id="characterLevel">
       LEVEL 1
      </div>
     </div><!-- Character Main Stats -->
     <div class="character-main"><!-- Left: Vitals (HP, SP, XP) -->
      <div class="character-vitals"><!-- HP Bar -->
       <div class="vital-bar">
        <div class="vital-label"><span class="vital-name">❤️ HP (HEALTH)</span> <span class="vital-value" id="hpValue">10 / 100</span>
        </div>
        <div class="vital-progress">
         <div class="vital-fill hp-fill" id="hpBar" style="width: 10%"></div>
        </div>
       </div><!-- SP Bar -->
       <div class="vital-bar">
        <div class="vital-label"><span class="vital-name">⚡ SP (SKILL)</span> <span class="vital-value" id="spValue">5 / 100</span>
        </div>
        <div class="vital-progress">
         <div class="vital-fill sp-fill" id="spBar" style="width: 5%"></div>
        </div>
       </div><!-- XP Bar -->
       <div class="vital-bar">
        <div class="vital-label"><span class="vital-name">⭐ XP (EXPERIENCE)</span> <span class="vital-value" id="xpValue">0 / 100</span>
        </div>
        <div class="vital-progress">
         <div class="vital-fill xp-fill" id="xpBar" style="width: 0%"></div>
        </div>
       </div>
      </div><!-- Center: Stats Grid -->
      <div class="character-stats">
       <div class="stat-box">
        <div class="stat-icon">
         🎯
        </div>
        <div class="stat-value" id="contributionsStat">
         0
        </div>
        <div class="stat-label">
         Contributions
        </div>
       </div>
       <div class="stat-box">
        <div class="stat-icon">
         🏆
        </div>
        <div class="stat-value" id="questsStat">
         0
        </div>
        <div class="stat-label">
         Quests
        </div>
       </div>
       <div class="stat-box">
        <div class="stat-icon">
         📅
        </div>
        <div class="stat-value" id="eventsStat">
         0
        </div>
        <div class="stat-label">
         Events
        </div>
       </div>
       <div class="stat-box">
        <div class="stat-icon">
         🚀
        </div>
        <div class="stat-value" id="projectsStat">
         0
        </div>
        <div class="stat-label">
         Projects
        </div>
       </div>
       <div class="stat-box">
        <div class="stat-icon">
         🤝
        </div>
        <div class="stat-value" id="connectionsStat">
         0
        </div>
        <div class="stat-label">
         Connections
        </div>
       </div>
       <div class="stat-box">
        <div class="stat-icon">
         💎
        </div>
        <div class="stat-value" id="experienceStat">
         0
        </div>
        <div class="stat-label">
         Total XP
        </div>
       </div>
      </div><!-- Right: Equipment Inventory -->
      <div class="character-equipment">
       <div class="equipment-header">
        <h4>🎒 EQUIPMENT</h4>
       </div>
       <div class="equipment-grid" id="equipmentGrid">
        <div class="equipment-slot empty" data-slot="0">
         <div class="equipment-tooltip">
          EMPTY SLOT
         </div>
        </div>
        <div class="equipment-slot empty" data-slot="1">
         <div class="equipment-tooltip">
          EMPTY SLOT
         </div>
        </div>
        <div class="equipment-slot empty" data-slot="2">
         <div class="equipment-tooltip">
          EMPTY SLOT
         </div>
        </div>
        <div class="equipment-slot empty" data-slot="3">
         <div class="equipment-tooltip">
          EMPTY SLOT
         </div>
        </div>
        <div class="equipment-slot empty" data-slot="4">
         <div class="equipment-tooltip">
          EMPTY SLOT
         </div>
        </div>
        <div class="equipment-slot empty" data-slot="5">
         <div class="equipment-tooltip">
          EMPTY SLOT
         </div>
        </div>
       </div>
       <div class="equipment-count">
        0 / 6 ITEMS
       </div>
      </div>
     </div><!-- Character Actions -->
     <div class="character-actions" id="characterActions"><button class="character-action-btn" id="loginCharacterBtn"> <span>🎮 LOGIN TO SAVE CHARACTER</span> </button> <button class="character-action-btn" id="logoutCharacterBtn" style="display: none;"> <span>🚪 LOGOUT</span> </button>
     </div>
    </div>
   </footer>
  </div><!-- Login Modal -->
  <div class="login-modal" id="loginModal">
   <div class="login-card"><button class="close-modal" id="closeLoginBtn" aria-label="Close login">×</button>
    <h2>Welcome to HomeDir</h2>
    <p class="subtitle">Login to manage your profile and data</p>
    <div class="login-buttons"><button class="login-btn" id="googleLogin">
      <svg viewbox="0 0 24 24" fill="currentColor"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4" /> <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853" /> <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05" /> <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335" />
      </svg> Continue with Google </button> <button class="login-btn" id="githubLogin">
      <svg viewbox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
      </svg> Continue with GitHub </button>
    </div>
   </div>
  </div><!-- Toast Notification -->
  <div class="toast" id="toast"></div>
  <script>
    let currentUser = null;
    let allUsers = [];

    // Equipment/Collectibles System
    const COLLECTIBLES = [
      { id: 'laptop', icon: '💻', name: 'DEVELOPER LAPTOP', rarity: 'common', description: '+5 Coding Power' },
      { id: 'keyboard', icon: '��️', name: 'MECHANICAL KEYBOARD', rarity: 'rare', description: '+10 Typing Speed' },
      { id: 'coffee', icon: '☕', name: 'ENERGY COFFEE', rarity: 'common', description: '+3 Focus' },
      { id: 'badge', icon: '🏅', name: 'CONTRIBUTOR BADGE', rarity: 'epic', description: '+15 Reputation' },
      { id: 'trophy', icon: '🏆', name: 'CHAMPION TROPHY', rarity: 'legendary', description: '+25 Achievement' },
      { id: 'book', icon: '📚', name: 'CODE MANUAL', rarity: 'rare', description: '+8 Knowledge' },
      { id: 'rocket', icon: '��', name: 'LAUNCH ROCKET', rarity: 'epic', description: '+20 Deployment' },
      { id: 'gem', icon: '💎', name: 'RARE GEM', rarity: 'legendary', description: '+30 Value' },
      { id: 'shield', icon: '🛡️', name: 'SECURITY SHIELD', rarity: 'epic', description: '+18 Protection' },
      { id: 'wand', icon: '🪄', name: 'DEBUG WAND', rarity: 'rare', description: '+12 Bug Fix' },
      { id: 'crown', icon: '👑', name: 'LEADER CROWN', rarity: 'legendary', description: '+35 Leadership' },
      { id: 'glasses', icon: '👓', name: 'CODE GLASSES', rarity: 'common', description: '+4 Vision' }
    ];

    // Function to get random collectibles for a user
    function generateEquipment(level, experience) {
      const equipment = [];
      const itemCount = Math.min(6, Math.floor(level / 2) + Math.floor(experience / 200));
      
      const shuffled = [...COLLECTIBLES].sort(() => Math.random() - 0.5);
      
      for (let i = 0; i < itemCount; i++) {
        equipment.push(shuffled[i].id);
      }
      
      return equipment;
    }

    // Function to update equipment display
    function updateEquipmentDisplay(equipment = []) {
      const slots = document.querySelectorAll('.equipment-slot');
      let filledCount = 0;
      
      slots.forEach((slot, index) => {
        if (equipment[index]) {
          const collectible = COLLECTIBLES.find(c => c.id === equipment[index]);
          if (collectible) {
            slot.classList.remove('empty');
            slot.classList.add('filled');
            slot.innerHTML = `
              ${collectible.icon}
              <div class="equipment-rarity rarity-${collectible.rarity}"></div>
              <div class="equipment-tooltip">
                ${collectible.name}<br>
                <span style="color: #FFD700;">${collectible.description}</span>
              </div>
            `;
            filledCount++;
          }
        } else {
          slot.classList.add('empty');
          slot.classList.remove('filled');
          slot.innerHTML = `
            <div class="equipment-tooltip">EMPTY SLOT</div>
          `;
        }
      });
      
      document.querySelector('.equipment-count').textContent = `${filledCount} / 6 ITEMS`;
    }

    const defaultConfig = {
      platform_name: "HomeDir",
      tagline: "by OpenSourceSantiago",
      community_title: "Community",
      community_description: "Modern toolbox for community building and opensource technology innovation",
      events_title: "Events",
      events_description: "Scale your teams with collaborative meetups and tech conferences",
      projects_title: "Projects",
      projects_description: "Innovation hub for your opensource technology projects",
      background_start: "#667eea",
      background_end: "#764ba2",
      card_background: "#ffffff",
      text_color: "#ffffff",
      accent_color: "#FFD700"
    };

    let config = defaultConfig;

    // Data SDK Handler
    const dataHandler = {
      onDataChanged(data) {
        allUsers = data;
        
        if (currentUser) {
          const updatedUser = data.find(u => u.user_id === currentUser.user_id);
          if (updatedUser) {
            currentUser = updatedUser;
            updateProfileDisplay();
          }
        }
      }
    };

    // Initialize Data SDK
    async function initDataSdk() {
      const result = await window.dataSdk.init(dataHandler);
      if (!result.isOk) {
        showToast('Failed to initialize data storage');
      }
    }

    // Element SDK Functions
    async function onConfigChange(newConfig) {
      config = newConfig;
      
      document.getElementById('navPlatformName').textContent = config.platform_name || defaultConfig.platform_name;
      document.getElementById('navTagline').textContent = config.tagline || defaultConfig.tagline;
      document.getElementById('mainTitle').textContent = config.platform_name || defaultConfig.platform_name;
      document.getElementById('mainTagline').textContent = (config.tagline || defaultConfig.tagline) + ' - The community platform to scale your teams and projects';
      document.getElementById('communityTitle').textContent = config.community_title || defaultConfig.community_title;
      document.getElementById('communityDescription').textContent = config.community_description || defaultConfig.community_description;
      document.getElementById('eventsTitle').textContent = config.events_title || defaultConfig.events_title;
      document.getElementById('eventsDescription').textContent = config.events_description || defaultConfig.events_description;
      document.getElementById('projectsTitle').textContent = config.projects_title || defaultConfig.projects_title;
      document.getElementById('projectsDescription').textContent = config.projects_description || defaultConfig.projects_description;

      document.body.style.background = `linear-gradient(135deg, ${config.background_start || defaultConfig.background_start} 0%, ${config.background_end || defaultConfig.background_end} 100%)`;
      document.body.style.color = config.text_color || defaultConfig.text_color;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_start || defaultConfig.background_start,
            set: (value) => {
              config.background_start = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ background_start: value });
              }
            }
          },
          {
            get: () => config.background_end || defaultConfig.background_end,
            set: (value) => {
              config.background_end = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ background_end: value });
              }
            }
          },
          {
            get: () => config.card_background || defaultConfig.card_background,
            set: (value) => {
              config.card_background = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ card_background: value });
              }
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ text_color: value });
              }
            }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (value) => {
              config.accent_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ accent_color: value });
              }
            }
          }
        ],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["platform_name", config.platform_name || defaultConfig.platform_name],
        ["tagline", config.tagline || defaultConfig.tagline],
        ["community_title", config.community_title || defaultConfig.community_title],
        ["community_description", config.community_description || defaultConfig.community_description],
        ["events_title", config.events_title || defaultConfig.events_title],
        ["events_description", config.events_description || defaultConfig.events_description],
        ["projects_title", config.projects_title || defaultConfig.projects_title],
        ["projects_description", config.projects_description || defaultConfig.projects_description]
      ]);
    }

    // Toast Notification
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // UI Control Functions
    function openLoginModal() {
      document.getElementById('loginModal').classList.add('show');
    }

    function closeLoginModal() {
      document.getElementById('loginModal').classList.remove('show');
    }

    function updateNavigation() {
      if (currentUser) {
        const emoji = currentUser.display_name.charAt(0);
        document.getElementById('openLoginBtn').style.display = 'none';
        document.getElementById('userMenuNav').classList.add('active');
        document.getElementById('navAvatar').textContent = emoji;
        document.getElementById('navUserName').textContent = currentUser.display_name;
      } else {
        document.getElementById('openLoginBtn').style.display = 'block';
        document.getElementById('userMenuNav').classList.remove('active');
      }
    }

    function updateCharacterSheet() {
      if (currentUser) {
        // Hide novice warning
        document.getElementById('noviceWarning').style.display = 'none';
        
        // Update character info
        document.getElementById('characterName').textContent = currentUser.display_name.toUpperCase();
        document.getElementById('characterClass').textContent = 'DEVELOPER';
        document.getElementById('characterLevel').textContent = `LEVEL ${currentUser.level}`;
        
        // Calculate vitals (HP and SP based on level and activity)
        const maxHP = 100;
        const maxSP = 100;
        const maxXPForLevel = currentUser.level * 100;
        
        const currentHP = Math.min(100, 10 + (currentUser.level * 10) + currentUser.contributions);
        const currentSP = Math.min(100, 5 + (currentUser.level * 8) + (currentUser.quests_completed * 5));
        const currentXP = currentUser.experience % maxXPForLevel;
        
        // Update HP
        document.getElementById('hpValue').textContent = `${currentHP} / ${maxHP}`;
        document.getElementById('hpBar').style.width = `${currentHP}%`;
        
        // Update SP
        document.getElementById('spValue').textContent = `${currentSP} / ${maxSP}`;
        document.getElementById('spBar').style.width = `${currentSP}%`;
        
        // Update XP
        document.getElementById('xpValue').textContent = `${currentXP} / ${maxXPForLevel}`;
        document.getElementById('xpBar').style.width = `${(currentXP / maxXPForLevel) * 100}%`;
        
        // Update stats
        document.getElementById('contributionsStat').textContent = currentUser.contributions;
        document.getElementById('questsStat').textContent = currentUser.quests_completed;
        document.getElementById('eventsStat').textContent = currentUser.events_attended;
        document.getElementById('projectsStat').textContent = currentUser.projects_hosted;
        document.getElementById('connectionsStat').textContent = currentUser.connections;
        document.getElementById('experienceStat').textContent = currentUser.experience;
        
        // Update equipment (generate based on level and experience)
        const equipment = generateEquipment(currentUser.level, currentUser.experience);
        updateEquipmentDisplay(equipment);
        
        // Show logout button, hide login button
        document.getElementById('loginCharacterBtn').style.display = 'none';
        document.getElementById('logoutCharacterBtn').style.display = 'block';
      } else {
        // Show novice warning
        document.getElementById('noviceWarning').style.display = 'block';
        
        // Reset to novice state
        document.getElementById('characterName').textContent = 'NOVICE GUEST';
        document.getElementById('characterClass').textContent = 'VISITOR';
        document.getElementById('characterLevel').textContent = 'LEVEL 1';
        
        // Reset vitals to minimum
        document.getElementById('hpValue').textContent = '10 / 100';
        document.getElementById('hpBar').style.width = '10%';
        
        document.getElementById('spValue').textContent = '5 / 100';
        document.getElementById('spBar').style.width = '5%';
        
        document.getElementById('xpValue').textContent = '0 / 100';
        document.getElementById('xpBar').style.width = '0%';
        
        // Reset all stats to 0
        document.getElementById('contributionsStat').textContent = '0';
        document.getElementById('questsStat').textContent = '0';
        document.getElementById('eventsStat').textContent = '0';
        document.getElementById('projectsStat').textContent = '0';
        document.getElementById('connectionsStat').textContent = '0';
        document.getElementById('experienceStat').textContent = '0';
        
        // Clear equipment
        updateEquipmentDisplay([]);
        
        // Show login button, hide logout button
        document.getElementById('loginCharacterBtn').style.display = 'block';
        document.getElementById('logoutCharacterBtn').style.display = 'none';
      }
    }

    // Login Functions
    async function handleLogin(provider) {
      const btn = provider === 'google' ? document.getElementById('googleLogin') : document.getElementById('githubLogin');
      btn.classList.add('loading');
      btn.disabled = true;

      // Simulate login with demo user
      const demoNames = ['Alex Chen', 'Maria Garcia', 'Jamal Johnson', 'Sofia Rodriguez', 'Kai Nakamura'];
      const randomName = demoNames[Math.floor(Math.random() * demoNames.length)];
      const userId = `user_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;

      // Generate demo data with some progress
      const demoLevel = Math.floor(Math.random() * 5) + 1;
      const demoExperience = Math.floor(Math.random() * 500);
      
      const newUser = {
        user_id: userId,
        display_name: randomName,
        avatar_url: '',
        level: demoLevel,
        experience: demoExperience,
        contributions: Math.floor(Math.random() * 30),
        quests_completed: Math.floor(Math.random() * 10),
        events_attended: Math.floor(Math.random() * 5),
        projects_hosted: Math.floor(Math.random() * 3),
        connections: Math.floor(Math.random() * 20),
        login_provider: provider,
        created_at: new Date().toISOString()
      };

      const result = await window.dataSdk.create(newUser);

      if (result.isOk) {
        currentUser = newUser;
        closeLoginModal();
        updateNavigation();
        updateCharacterSheet();
        showToast(`Welcome, ${randomName}! 🎉 Your character has been created!`);
      } else {
        showToast('Login failed. Please try again.');
      }
      
      btn.classList.remove('loading');
      btn.disabled = false;
    }

    function handleLogout() {
      currentUser = null;
      updateNavigation();
      updateCharacterSheet();
      showToast('Logged out successfully - Character data saved!');
    }

    // Tech Campus Functions
    const TECH_AVATARS = ['👨����💻', '👩‍💻', '🧑‍💻', '👨‍🎨', '👩‍🎨', '🧑‍🎨', '👨‍🔬', '👩‍🔬', '🧑‍🔬', '🦸‍♂️', '🦸‍♀️', '🧙‍♂️', '🧙‍♀️', '🤖', '👾', '🚀'];
    
    const TECH_ROLES = [
      { emoji: '⚛️', name: 'FRONTEND' },
      { emoji: '⚙️', name: 'BACKEND' },
      { emoji: '🎨', name: 'DESIGNER' },
      { emoji: '📊', name: 'DATA SCI' },
      { emoji: '🏗️', name: 'PLATFORM' },
      { emoji: '🔐', name: 'DEVOPS' },
      { emoji: '📱', name: 'MOBILE' },
      { emoji: '🧪', name: 'QA' },
      { emoji: '📈', name: 'PRODUCT' }
    ];

    const STATUS_TYPES = ['online', 'busy', 'away'];

    function generateVillageInhabitants() {
      const inhabitantsLayer = document.getElementById('inhabitantsLayer');
      inhabitantsLayer.innerHTML = '';

      // Use all users from the database
      const members = allUsers.length > 0 ? allUsers : generateDemoInhabitants();

      members.forEach((user, index) => {
        const member = document.createElement('div');
        member.className = 'team-member';
        
        // Random position in the tech campus ground
        const left = 12 + (Math.random() * 76);
        const bottom = 18 + (Math.random() * 35);
        
        member.style.left = `${left}%`;
        member.style.bottom = `${bottom}%`;
        member.style.animationDelay = `${Math.random() * 4}s`;

        const avatar = user.display_name ? TECH_AVATARS[user.display_name.charCodeAt(0) % TECH_AVATARS.length] : TECH_AVATARS[index % TECH_AVATARS.length];
        const role = TECH_ROLES[index % TECH_ROLES.length];
        const status = STATUS_TYPES[Math.floor(Math.random() * STATUS_TYPES.length)];

        member.innerHTML = `
          <div class="member-level">${user.level || 1}</div>
          <div class="member-avatar">
            ${avatar}
            <div class="member-status status-${status}"></div>
          </div>
          <div class="member-badge">${user.display_name || 'Guest'}</div>
          <div class="member-role">${role.emoji}</div>
        `;

        inhabitantsLayer.appendChild(member);
      });

      updateCommunityStats(members);
    }

    function generateDemoInhabitants() {
      const demoMembers = [
        { name: 'Alex Chen', role: 'Senior Frontend Dev' },
        { name: 'Maria Garcia', role: 'Backend Architect' },
        { name: 'Jamal Johnson', role: 'UX Designer' },
        { name: 'Sofia Rodriguez', role: 'Data Scientist' },
        { name: 'Kai Nakamura', role: 'DevOps Engineer' },
        { name: 'Emma Wilson', role: 'Full Stack Dev' },
        { name: 'Lucas Silva', role: 'Mobile Developer' },
        { name: 'Aisha Patel', role: 'UI Designer' },
        { name: 'Oliver Kim', role: 'QA Engineer' },
        { name: 'Isabella Brown', role: 'Product Manager' },
        { name: 'Noah Zhang', role: 'Tech Lead' },
        { name: 'Mia Ivanov', role: 'Frontend Dev' },
        { name: 'Ethan Okafor', role: 'ML Engineer' },
        { name: 'Ava Müller', role: 'Brand Designer' },
        { name: 'Liam O\'Brien', role: 'Security Expert' }
      ];

      return demoMembers.map((member, index) => ({
        user_id: `demo_${index}`,
        display_name: member.name,
        level: Math.floor(Math.random() * 10) + 1,
        experience: Math.floor(Math.random() * 1200),
        contributions: Math.floor(Math.random() * 80),
        quests_completed: Math.floor(Math.random() * 30),
        projects_hosted: Math.floor(Math.random() * 8)
      }));
    }

    function updateCommunityStats(inhabitants) {
      const totalMembers = inhabitants.length;
      const totalXP = inhabitants.reduce((sum, user) => sum + (user.experience || 0), 0);
      const totalQuests = inhabitants.reduce((sum, user) => sum + (user.quests_completed || 0), 0);
      const totalProjects = inhabitants.reduce((sum, user) => sum + (user.projects_hosted || 0), 0);

      document.getElementById('totalMembers').textContent = totalMembers;
      document.getElementById('totalXP').textContent = totalXP.toLocaleString();
      document.getElementById('totalQuests').textContent = totalQuests;
      document.getElementById('totalProjects').textContent = totalProjects;
    }

    function showCommunityView() {
      document.getElementById('publicContent').style.display = 'none';
      document.getElementById('communityView').style.display = 'block';
      generateVillageInhabitants();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function hideCommunityView() {
      document.getElementById('publicContent').style.display = 'block';
      document.getElementById('communityView').style.display = 'none';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function updateProfileDisplay() {
      // If community view is open, refresh inhabitants
      if (document.getElementById('communityView').style.display === 'block') {
        generateVillageInhabitants();
      }
    }

    // Event Listeners
    document.getElementById('openLoginBtn').addEventListener('click', openLoginModal);
    document.getElementById('closeLoginBtn').addEventListener('click', closeLoginModal);
    document.getElementById('googleLogin').addEventListener('click', () => handleLogin('google'));
    document.getElementById('githubLogin').addEventListener('click', () => handleLogin('github'));
    document.getElementById('logoutBtn').addEventListener('click', handleLogout);
    document.getElementById('loginCharacterBtn').addEventListener('click', openLoginModal);
    document.getElementById('logoutCharacterBtn').addEventListener('click', handleLogout);
    document.getElementById('communityCard').addEventListener('click', showCommunityView);
    document.getElementById('backButton').addEventListener('click', hideCommunityView);
    
    // Close modal when clicking outside
    document.getElementById('loginModal').addEventListener('click', (e) => {
      if (e.target.id === 'loginModal') {
        closeLoginModal();
      }
    });

    // Initialize SDKs
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    if (window.dataSdk) {
      initDataSdk();
    }

    // Initialize character sheet on page load
    updateCharacterSheet();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a67a29b651488b2',t:'MTc2NDQ3NzI5Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>